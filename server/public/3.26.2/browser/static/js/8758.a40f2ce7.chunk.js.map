{"version":3,"file":"static/js/8758.a40f2ce7.chunk.js","mappings":"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","sources":["../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/instance/bind.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/instance/for-each.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/instance/reduce.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/object/entries.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js-stable/promise.js","../../../node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/core-js/object/define-property.js","../../../node_modules/.pnpm/@accedo+xdk-device-freeview-html5-contrib@4.0.7_567d038adb0a2ca2afc20b8bd2695c13/node_modules/@accedo/xdk-device-freeview-html5-contrib/esm/player/extension/PlayreadyDRMAgent.js","../../../node_modules/.pnpm/@accedo+xdk-device-freeview-html5-contrib@4.0.7_567d038adb0a2ca2afc20b8bd2695c13/node_modules/@accedo/xdk-device-freeview-html5-contrib/esm/helpers.js","../../../node_modules/.pnpm/@accedo+xdk-log@4.0.4_@accedo+xdk-config@4.0.2/node_modules/@accedo/xdk-log/esm/log.js","../javascript/esm|/Users/adambons/Documents/workspace/itv/fe-core/node_modules/.pnpm/@babel+runtime-corejs3@7.16.8/node_modules/@babel/runtime-corejs3/helpers/esm/defineProperty.js"],"sourcesContent":["module.exports = require(\"core-js-pure/stable/instance/bind\");","module.exports = require(\"core-js-pure/stable/instance/filter\");","module.exports = require(\"core-js-pure/stable/instance/for-each\");","module.exports = require(\"core-js-pure/stable/instance/reduce\");","module.exports = require(\"core-js-pure/stable/object/define-properties\");","module.exports = require(\"core-js-pure/stable/object/define-property\");","module.exports = require(\"core-js-pure/stable/object/entries\");","module.exports = require(\"core-js-pure/stable/object/get-own-property-descriptor\");","module.exports = require(\"core-js-pure/stable/object/get-own-property-descriptors\");","module.exports = require(\"core-js-pure/stable/object/get-own-property-symbols\");","module.exports = require(\"core-js-pure/stable/object/keys\");","module.exports = require(\"core-js-pure/stable/promise\");","module.exports = require(\"core-js-pure/features/object/define-property\");","/*******************************************************************************\n* @license\n* Copyright (c) 2016 - present Accedo. All Rights Reserved.\n* \n* This source code, its use, and distribution, is subject to the terms\n* and conditions of the applicable license agreement.\n* \n* Accedo Build XDK Device Package - Freeview HTML5 (@accedo/xdk-device-freeview-html5-contrib) 4.0.7\n* \n*******************************************************************************/\nimport _Object$defineProperty from\"@babel/runtime-corejs3/core-js-stable/object/define-property\";import _Object$defineProperties from\"@babel/runtime-corejs3/core-js-stable/object/define-properties\";import _Object$getOwnPropertyDescriptors from\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors\";import _forEachInstanceProperty from\"@babel/runtime-corejs3/core-js-stable/instance/for-each\";import _Object$getOwnPropertyDescriptor from\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\";import _filterInstanceProperty from\"@babel/runtime-corejs3/core-js-stable/instance/filter\";import _Object$getOwnPropertySymbols from\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols\";import _Object$keys from\"@babel/runtime-corejs3/core-js-stable/object/keys\";import _Promise from\"@babel/runtime-corejs3/core-js-stable/promise\";import _bindInstanceProperty from\"@babel/runtime-corejs3/core-js-stable/instance/bind\";import _defineProperty from\"@babel/runtime-corejs3/helpers/esm/defineProperty\";import _Object$entries from\"@babel/runtime-corejs3/core-js-stable/object/entries\";import _reduceInstanceProperty from\"@babel/runtime-corejs3/core-js-stable/instance/reduce\";var _context;function ownKeys(e,t){var r=_Object$keys(e);if(_Object$getOwnPropertySymbols){var s=_Object$getOwnPropertySymbols(e);t&&(s=_filterInstanceProperty(s).call(s,(function(t){return _Object$getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r,s=null!=arguments[t]?arguments[t]:{};if(t%2)_forEachInstanceProperty(r=ownKeys(Object(s),!0)).call(r,(function(t){_defineProperty(e,t,s[t])}));else if(_Object$getOwnPropertyDescriptors)_Object$defineProperties(e,_Object$getOwnPropertyDescriptors(s));else{var n;_forEachInstanceProperty(n=ownKeys(Object(s))).call(n,(function(t){_Object$defineProperty(e,t,_Object$getOwnPropertyDescriptor(s,t))}))}}return e}import{klass,error,promise,util,IDRMAgent,DRMConstants}from\"@accedo/xdk-core\";import logger from\"@accedo/xdk-log\";import{getDrmAgent,removeDrmAgent}from\"../../helpers\";const logTag=\"freeview/player/extension/PlayreadyDRMAgent\",{warn:warn,log:log,info:info}=logger({logTag:\"freeview/player/extension/PlayreadyDRMAgent\"}),{isString:isString}=util,{IllegalArgument:IllegalArgument,IllegalState:IllegalState,Unauthorized:Unauthorized}=error,{MIME_TYPE:{PLAYREADY:MIME_TYPE_PLAYREADY},PLAYREADY:{INIT_MSG:{CUSTOM_DATA:CUSTOM_DATA_XML,LA_URL:LA_URL_XML}},SYSTEM_ID:SYSTEM_ID}=DRMConstants,{PLAYREADY:PLAYREADY_SYSTEM_ID}=SYSTEM_ID,toLaURLMessage=e=>isString(e)?LA_URL_XML.replace(\"{{laURL}}\",e):void 0,toCustomDataMessage=e=>isString(e)?CUSTOM_DATA_XML.replace(\"{{customData}}\",e):void 0,translateDRMResult=(e,t)=>{let r,s=e;switch(s){case 0:r=\"Successful\";break;case 1:s+=`, ${t}`,r=\"0x8004C600\"===t?\"Server could not deliver a license (server internal error)\":\"0x8004C580\"===t?\"Acquired license successfully but domain certificate missing on device\":\"Unknown result message\";break;case 2:r=\"Cannot process request\";break;case 3:r=\"Unknown MIME type\";break;case 4:r=\"User consent needed\";break;case 5:r=\"Unknown DRM system\";break;case 6:r=\"Wrong format\";break;default:r=\"Unknown result\"}return`(${s}) - ${r}`},translateErrorState=e=>{switch(e){case 0:return\"No license (0), consumption of the content is blocked\";case 1:return\"Invalid License (1), consumption of the content is blocked\";case 2:return\"Valid License (2), consumption of the content is unblocked\";default:return`Unknown state (${e})`}},SYSTEM_ID_LOOKUP=_reduceInstanceProperty(_context=_Object$entries(SYSTEM_ID)).call(_context,((e,[t,r])=>_objectSpread({[r.split(\":\").pop()]:t},e)),{}),getSystemName=e=>SYSTEM_ID_LOOKUP[`${e}`]||\"unknown\",PlayReadyDRMAgent=klass.create([IDRMAgent],{},{_drmAgent:null,_systemId:null,__acquiringLicense:!1,__DRMMessageResultCallback:null,__DRMRightsErrorCallback:null,async prepare(e,t){var r,s;if(!t)throw new IllegalArgument(\"Player is not available.\");const n=getDrmAgent(t.getParentNode());if(!n)throw warn(\"DRM Agent not found.\"),new IllegalArgument(\"DRM Agent not found.\");this._drmAgent=n,this._systemId=PLAYREADY_SYSTEM_ID,n.onDRMMessageResult=_bindInstanceProperty(r=this._onDRMMessageResult).call(r,this),n.onDRMRightsError=_bindInstanceProperty(s=this._onDRMRightsError).call(s,this)},sendLicense(e,{drmURL:t,customData:r}){return promise.toXDK((async()=>{if(this.__acquiringLicense)throw new IllegalState(\"License is being sent\");try{this.__acquiringLicense=!0;const e=await this.sendLicenseMessage(t)&&await this.sendCustomDataMessage(r);return e&&info(\"License acquired\"),e}catch(e){return!1}finally{this.__acquiringLicense=!1}})())},async sendLicenseMessage(e){const{returnValue:t=!1}=await this.sendMessage(toLaURLMessage(e));return t},async sendCustomDataMessage(e){const{returnValue:t=!1}=await this.sendMessage(toCustomDataMessage(e));return t},sendMessage(e){return new _Promise(((t,r)=>{if(!e)return log(\"sendMessage: No message needs to be sent.\"),void t({returnValue:!0});const{_systemId:s,_drmAgent:n}=this;if(!s)return log(\"sendMessage: Failed due to invalid systemId. Please call prepare to load DRM Agent.\"),void r(\"sendMessage: Failed due to invalid systemId. Please call prepare to load DRM Agent.\");this.__DRMMessageResultCallback=t,this.__DRMRightsErrorCallback=r,n.sendDRMMessage(MIME_TYPE_PLAYREADY,e,s)}))},_onDRMMessageResult(e,t,r){var s;const n=translateDRMResult(r,t);info(`_onDRMMessageResult: ${n}`),null===(s=this.__DRMMessageResultCallback)||void 0===s||s.call(this,{returnValue:!0})},_onDRMRightsError(e,t,r,s){var n,o;const a=SYSTEM_ID_LOOKUP[`${r}`]||\"unknown\";const i=translateErrorState(e),l=_reduceInstanceProperty(n=_Object$entries({system:a,error:i,contentId:t,rightsIssuerUrl:s})).call(n,((e,[t,r])=>[...e,`${t}: ${r}`]),[]).join(\", \");warn(`_onDRMRightsError: ${l}`),null===(o=this.__DRMRightsErrorCallback)||void 0===o||o.call(this,new Unauthorized(l))},deinit(){const{_drmAgent:e}=this;e.onDRMMessageResult=null,e.onDRMRightsError=null,removeDrmAgent(),this._drmAgent=null,this._systemId=null,this.__acquiringLicense=!1,this._DRMMessageResultCallback=null,this._DRMRightsErrorCallback=null}});export default PlayReadyDRMAgent;","/*******************************************************************************\n* @license\n* Copyright (c) 2016 - present Accedo. All Rights Reserved.\n* \n* This source code, its use, and distribution, is subject to the terms\n* and conditions of the applicable license agreement.\n* \n* Accedo Build XDK Device Package - Freeview HTML5 (@accedo/xdk-device-freeview-html5-contrib) 4.0.7\n* \n*******************************************************************************/\nimport logger from\"@accedo/xdk-log\";const{debug:debug}=logger({logTag:\"[freeview-html5/helpers]\"}),OIPF_DRM_AGENT=\"application/oipfDrmAgent\",createObject=e=>{var t;const n=null===(t=document)||void 0===t?void 0:t.createElement(\"object\"),{body:r}=document||{};return n&&r&&(n.id=\"drmAgent\",n.type=e,n.style.width=0,n.style.height=0,r.appendChild(n)),n},getElementById=e=>{var t;return null===(t=document)||void 0===t?void 0:t.getElementById(e)},getObject=e=>getElementById(\"drmAgent\")||createObject(e),getDrmAgent=()=>{debug(\"create OIPF DRM Agent.\");var e;return e=OIPF_DRM_AGENT,getElementById(\"drmAgent\")||createObject(e)},removeDrmAgent=()=>{var e,t;debug(\"Removing DRM Agent\");const n=getElementById(OIPF_DRM_AGENT);null===(e=document)||void 0===e||null===(t=e.body)||void 0===t||t.removeChild(n)};export{getDrmAgent,removeDrmAgent};","/*******************************************************************************\n* @license\n* Copyright (c) 2016 - present Accedo. All Rights Reserved.\n* \n* This source code, its use, and distribution, is subject to the terms\n* and conditions of the applicable license agreement.\n* \n* Accedo Build XDK Log (@accedo/xdk-log) 4.0.4\n* \n*******************************************************************************/\nimport _bindInstanceProperty from\"@babel/runtime-corejs3/core-js-stable/instance/bind\";import config from\"@accedo/xdk-config\";const DEFAULT_LOG_TAG=\"[xdk-log]\",LOG_LEVELS={ALL:-1,DEBUG:0,INFO:1,LOG:2,WARN:3,ERROR:4},{DEBUG:DEBUG,INFO:INFO,LOG:LOG,WARN:WARN,ERROR:ERROR}=LOG_LEVELS,noop=()=>{},createLogger=({logTag:o=\"[xdk-log]\",transport:r})=>{var n,e,t,a,c;const{transport:l,level:g=2}=config.get(\"logging\",{}),L=r||l||console,p=g<=ERROR?_bindInstanceProperty(n=L.error).call(n,L,o):noop;return{error:p,logError:p,warn:g<=WARN?_bindInstanceProperty(e=L.warn).call(e,L,o):noop,log:g<=LOG?_bindInstanceProperty(t=L.log).call(t,L,o):noop,info:g<=INFO?_bindInstanceProperty(a=L.info).call(a,L,o):noop,debug:g<=DEBUG?_bindInstanceProperty(c=L.debug).call(c,L,o):noop}};export{LOG_LEVELS};export default createLogger;","import _Object$defineProperty from \"@babel/runtime-corejs3/core-js/object/define-property\";\nexport default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    _Object$defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"names":["module","exports","_context","debug","logger","logTag","OIPF_DRM_AGENT","createObject","e","t","n","document","createElement","r","body","id","type","style","width","height","appendChild","getElementById","ownKeys","_Object$keys","_Object$getOwnPropertySymbols","s","_filterInstanceProperty","call","_Object$getOwnPropertyDescriptor","enumerable","push","apply","warn","log","info","isString","util","IllegalArgument","error","IllegalState","Unauthorized","MIME_TYPE_PLAYREADY","DRMConstants","CUSTOM_DATA_XML","CUSTOM_DATA","LA_URL_XML","LA_URL","SYSTEM_ID","PLAYREADY_SYSTEM_ID","PLAYREADY","toLaURLMessage","replace","toCustomDataMessage","SYSTEM_ID_LOOKUP","_reduceInstanceProperty","_Object$entries","arguments","length","_forEachInstanceProperty","Object","_defineProperty","_Object$getOwnPropertyDescriptors","_Object$defineProperties","_Object$defineProperty","_objectSpread","split","pop","klass","IDRMAgent","_drmAgent","_systemId","__acquiringLicense","__DRMMessageResultCallback","__DRMRightsErrorCallback","prepare","getParentNode","onDRMMessageResult","_bindInstanceProperty","_onDRMMessageResult","onDRMRightsError","_onDRMRightsError","sendLicense","drmURL","customData","promise","sendLicenseMessage","sendCustomDataMessage","sendMessage","returnValue","_Promise","sendDRMMessage","translateDRMResult","this","o","a","i","translateErrorState","l","system","contentId","rightsIssuerUrl","join","deinit","removeChild","removeDrmAgent","_DRMMessageResultCallback","_DRMRightsErrorCallback","DEBUG","INFO","LOG","WARN","ERROR","noop","c","transport","config","level","g","L","console","p","logError","obj","key","value","configurable","writable"],"sourceRoot":""}