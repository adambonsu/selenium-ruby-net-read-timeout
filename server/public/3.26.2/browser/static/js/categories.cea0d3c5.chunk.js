"use strict";(self.webpackChunk_itv_fe_cassandra=self.webpackChunk_itv_fe_cassandra||[]).push([[5267],{99492:function(e,r,t){t.d(r,{Z:function(){return A}});var n=t(64628),o=t(89626),a=t.n(o),i=t(98830),c=t(20625),l=t(22194),u=t(23640),s=t(12642),d=t.n(s),m=t(30287),g=t.n(m),p=t(64344),f=t(49356),y=t(5073),b=t(16363),v=["britboxPromoTile","hubplusEntertainmentPromoTile","hubplusFullSeriesPromoTile"],h=["title","special","film"],E=function(e){var r=e.row,t=e.rowIndex,n=e.firstId,o=e.onBackTo;return r.map((function(e,r){var a,i,c=e.encodedEpisodeId,l=e.encodedProgrammeId,u=e.promoUrl,s=e.type,d=s||"programme";return v.includes(s)?(i="".concat(e.type,"-").concat(t,"-").concat(r),a=u):h.includes(s)?(i="episode-".concat(t,"-").concat(c.letterA),a="/programmes/".concat(l.underscore,"/").concat(c.letterA)):(i="programme-".concat(t,"-").concat(l.letterA),a="/programmes/".concat(l.underscore)),{programme:e,tileIndex:r,link:a,contentType:d,tileId:i,backTo:t+r>0?n:o}}))};function k(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?k(Object(t),!0).forEach((function(r){w(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function w(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var I=function(e){var r=e.id,t=e.row,o=e.rowIndex,a=e.firstId,c=e.onBackTo,l=e.writeToDOM,u=(0,b.UO)(),s=u.categoryName,d=u.collectionId,m=(0,y.nP)().trackCptEvent,g=E({row:t,rowIndex:o,firstId:a,onBackTo:c});return n.createElement(i.default,{key:t[0].encodedEpisodeId,id:r,gridChild:!0,optimiseRenders:!0,className:"TileGrid__row",writeToDOM:l},l&&g.map((function(e,r){var t=e.programme,a=e.tileIndex,i=e.link,c=e.tileId,l=e.backTo;return n.createElement(f.Z,{className:"TileGrid__cell",key:c,id:c,programme:O(O({},t),{},{imageUrl:t.image}),type:t.tileType,href:i,backTo:l,onClick:function(){return function(e){var r=e.programme,t=e.position,n=null!==s&&void 0!==s?s:d,a={listing_id:"".concat(s?"categories":"collections","_programmes_grid_").concat(n),position:4*o+t+1,programme_id:null===r||void 0===r?void 0:r.programmeId,item_type:(null===r||void 0===r?void 0:r.type)||"programme"};m(a)}({programme:t,position:r})},position:a,throttle:{horizontal:0,vertical:350}})})))};I.defaultProps={writeToDOM:!0},I.propTypes={id:a().string.isRequired,row:a().arrayOf(a().shape({encodedEpisodeId:a().shape({letterA:a().string,underscore:a().string})})).isRequired,onBackTo:a().func.isRequired,rowIndex:a().number.isRequired,firstId:a().string.isRequired,writeToDOM:a().bool};var P=I;function T(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return j(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var C=function(e){var r,t=(0,n.useRef)(),o=(0,p.Z)().handleBackTo,a=g()(4)(e),i=e[0]&&(r=e[0],{episode:"episode-0-".concat(r.encodedEpisodeId.letterA),programme:"programme-0-".concat(r.encodedProgrammeId.letterA)}[function(e){switch(e.type){case"episode":case"title":return"episode";default:return"programme"}}(r)]);return{pageContentRef:t,gridData:(0,n.useMemo)((function(){return T(a?Object.values(a).map((function(e,r){return{GridComponent:P,props:{id:"gridRow".concat(r+1),rowIndex:r,row:e,key:e[0].encodedProgrammeId.letterA,firstId:i,rowType:"slider",onBackTo:o,height:281}}})):[]).filter(Boolean)}),[i,o,a])}},_=function(e){var r=e.id,t=e.programmes,o=e.stealFocus,a=e.onClick,s=e.className,m=C(t),g=m.pageContentRef,p=m.gridData;return n.createElement(i.default,{grid:!0,id:r,className:d()(u.grid,s,"TileGrid"),orientation:"column",backToMemory:!0,stealFocus:o,jumpToLastFocus:!0,onClick:a},n.createElement(l.bI,{ref:g},p&&n.createElement(c.Z,{gridData:p})))};_.propTypes={id:a().string,programmes:a().arrayOf(a().shape({encodedEpisodeId:a().shape({letterA:a().string,underscore:a().string})})).isRequired,stealFocus:a().bool,onClick:a().func,className:a().string},_.defaultProps={id:"TileGrid",stealFocus:!1,onClick:null,className:""};var A=_},64344:function(e,r,t){t.d(r,{Z:function(){return i}});var n=t(16363),o=t(9673),a=t(53357);var i=function(){var e=(0,o.Z)(),r=(0,n.k6)(),t=(0,a.d)().toggleExitDialog;return{handleBackTo:function(){e.get("fromDeepLink")?t():r.goBack()}}}},87888:function(e,r,t){t.r(r),t.d(r,{default:function(){return G}});var n=t(64628),o=t(16363),a=t(76004),i=t.n(a),c=t(75787),l=t(6964),u=t(98830),s=t(33028),d=t(5073),m=t(22178),g=t(78092),p=t(33782),f=t(64839),y=function(){var e=(0,f.Z)({cerberusMethod:p.IH.contentInventory.genres.getAllCategories}),r=e.result,t=e.loading,n=e.networkError;return t?{loading:!0}:{categories:r,loading:!1,networkError:n}},b=t(89626),v=t.n(b),h=t(27403),E=t(99492),k=t(12642),O=t.n(k),w=t(23640),I=t(63288),P=t(25931),T=t(68013),j="Sorry there are no programmes in this category right now",C="Go back",_=function(){var e=(0,o.k6)(),r=(0,T.Z)().navigateBack,t=(0,n.useCallback)((function(){r(),e.goBack()}),[e,r]);return n.createElement("div",{className:"CategoryEmpty"},n.createElement("div",{className:"CategoryEmpty__heading"},n.createElement(P.ZP,{element:"h2",className:"CategoryEmpty__heading"},j)),n.createElement(I.Z,{id:"categoryEmptyBackButton",className:"Link__button",onClick:t},C))},A=p.IH.contentInventory.brands.getBrandsByCategory,D=function(e,r,t){var n=(0,f.Z)({cerberusMethod:function(){return A({category:e,limit:r,tiers:t})}},[e]),o=n.result,a=n.loading,i=n.networkError;return a?{loading:!0}:{brands:o,loading:!1,networkError:i}};function N(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function R(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?N(Object(t),!0).forEach((function(r){S(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function S(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var B=function(e){var r=e.categoryId,t=e.categoryName,o=(0,(0,n.useContext)(h.ZP).getIsPremiumUser)()?["FREE","PAID"]:["FREE"],a=D(r,null,o),i=a.brands,l=a.loading,d=a.networkError;return l?n.createElement(s.default,null):i&&i.length?d?n.createElement(c.Z,null):n.createElement("div",{id:"CategoryContent",className:O()("CategoryContent",w.gridWrapper)},n.createElement("h1",{className:"CategoryContent__title"},t),n.createElement(u.default,{id:"FocusCategoryContent",orientation:"column"},n.createElement(E.Z,{programmes:i.map((function(e){return R(R({},e),{},{tileType:"grid-standard"})}))}))):n.createElement(_,null)};B.propTypes={categoryId:v().string.isRequired,categoryName:v().string.isRequired},B.defaultProps={};var Z=B;function M(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,o,a=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(l){c=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(c)throw o}}return a}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return x(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var F={lower:!0,remove:/and/},q=function(e){return i()(e,F)},G=function(){var e=(0,o.k6)(),r=((0,o.UO)()||"").categoryName,t=y(),a=t.categories,i=t.loading,p=t.networkError,f=(0,o.TH)().pathname,b=(0,n.useMemo)((function(){return a?a.map((function(e){var r=e.name;return{id:e.id,label:r,slug:q(r),href:"".concat(m.H.categories,"/").concat(q(r))}})):[]}),[a]),v=M((0,n.useState)(),2),h=v[0],E=v[1];(0,n.useEffect)((function(){null!==b&&void 0!==b&&b.length&&E(b.find((function(e){return e.slug===r})))}),[r,b]);return i?n.createElement(s.default,null):a&&!p&&null!==h&&void 0!==h&&h.slug?n.createElement(l.default,{navTitle:"Categories",id:"categoriesPage",className:"categoriesPage",trackingPageType:d.c7.PROGRAMME_LIST,trackingPageId:"category-".concat(h.slug),trackingRoute:f},n.createElement(u.default,{id:"TabsGroupCatPage",orientation:"column",stealFocus:!0},n.createElement(g.Z,{pageList:b,selectedPageId:h.id,setPage:function(r){return e.push(r().href)},onBackTo:function(){e.goBack()}}),n.createElement(Z,{categoryName:h.label,categoryId:h.id}))):n.createElement(c.Z,null)}}}]);
//# sourceMappingURL=categories.cea0d3c5.chunk.js.map