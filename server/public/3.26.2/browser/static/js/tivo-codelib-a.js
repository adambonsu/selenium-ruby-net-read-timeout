!function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{};String.prototype.repeat||(String.prototype.repeat=function(e){for(var t="",n=0;n<e;n++)t+=this;return t}),t.string={entityify:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},quote:function(e){var t,n,i=e.length,r='"';for(n=0;n<i;n+=1)if((t=e.charAt(n))>=" ")"\\"!==t&&'"'!==t||(r+="\\"),r+=t;else switch(t){case"\b":r+="\\b";break;case"\f":r+="\\f";break;case"\n":r+="\\n";break;case"\r":r+="\\r";break;case"\t":r+="\\t";break;default:t=t.charCodeAt(),r+="\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)}return r+'"'},supplant:function(e,t){return e.replace(/{([^{}]*)}/g,(function(e,n){var i=t[n];return"string"==typeof i||"number"==typeof i?i:e}))},splice:function(e,t,n,i){return e.slice(0,t)+(i||"")+e.slice(t+Math.abs(n))},padNumber:function(e,t){return"0".repeat((t=t||2)-e.toString().length)+e}}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{};t.util=t.util||{};var n,i,r=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o="Boolean Number String Function Array Date RegExp Object".split(" "),s={};for(n in o)o.hasOwnProperty(n)&&(i=o[n],s["[object "+i+"]"]=i.toLowerCase());t.util.typeOf=function(e){return null===e||void 0===e?String(e):s[Object.prototype.toString.call(e)]||"object"};var c=function(e){if(!e||"[object Object]"!==a.call(e))return!1;var t,n=r.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;for(t in e);return void 0===t||r.call(e,t)};t.util.merge=function(){return function e(){var t,n,i,r,a,o,s=arguments[0],l=1,u=arguments.length,d=!1;for("boolean"==typeof s?(d=s,s=arguments[1]||{},l=2):("object"!=typeof s&&"function"!=typeof s||null==s)&&(s={});l<u;++l)if(null!=(t=arguments[l]))for(n in t)i=s[n],s!==(r=t[n])&&(d&&r&&(c(r)||(a=Array.isArray(r)))?(a?(a=!1,o=i&&Array.isArray(i)?i:[]):o=i&&c(i)?i:{},s[n]=e(d,o,r)):void 0!==r&&(s[n]=r));return s}.apply(null,[!0,{}].concat(Array.prototype.slice.call(arguments)))},t.util.clone=function(e){return e?JSON.parse(JSON.stringify(e)):e}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{};t.util=t.util||{};var n=t.util.typeOf;t.util.isObjEmpty=function(e){var t,i;if("object"===n(e))for(t in e)if(void 0!==(i=e[t])&&"function"!==n(i))return!1;return!0},t.util.escapeRegexSpecialChars=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{},n=t.string,i=864e5,r=36e5,a=6e4,o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function s(e,t){t=t||"%h:%m:%s:%z";var i=n.padNumber;return t.replace(/%([a-zA-Z])/g,(function(t,n){switch(n){case"Y":return e.getFullYear();case"M":return i(e.getMonth()+1);case"d":return i(e.getDate());case"e":return o[e.getDay()];case"h":return i(e.getHours());case"m":return i(e.getMinutes());case"s":return i(e.getSeconds());case"z":return i(e.getMilliseconds(),3);default:throw new Error("Unsupported format code: "+n)}}))}t.dateTime={isToday:function(e){return(new Date).toDateString()===e.toDateString()},format:s,formattedNow:function(e){return s(new Date,e)},toDaysHoursMinutes:function(e){var t,n,o,s="";return e>=i&&(s+=(t=Math.floor(e/i))+" day"+(t>1?"s":"")+", ",e-=t*i),e>=r&&(s+=(n=Math.floor(e/r))+" hour"+(n>1?"s":"")+", ",e-=n*r),e>=a&&(s+=(o=Math.floor(e/a))+" minute"+(o>1?"s":"")+", "),""!==s&&(s=s.substring(0,s.length-2)),s},addMinutes:function(e,t){return new Date(e.getTime()+6e4*t)},addSeconds:function(e,t){return new Date(e.getTime()+1e3*t)},createDateFromReadable:function(e,t){var n,i={},r=e.replace(/\s/g,"").split("/");return i.day=r[0],i.month=r[1]-1,i.year=r[2],n=t?t.replace(/\s/g,"").split(":"):[],new Date(i.year,i.month,i.day,n[0]||0,n[1]||0,n[2]||0)}},Object.defineProperty(t.dateTime,"millisInDay",{get:function(){return i}}),Object.defineProperty(t.dateTime,"millisInHour",{get:function(){return r}}),Object.defineProperty(t.dateTime,"millisInMinute",{get:function(){return a}})}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{};t.buildEnvironment=t.buildEnvironment||e.vmBuildEnvironment,t.appVersion=t.appVersion||e.vmAppVersion}(this);var $_=null;!function(e){"use strict";var t,n=e.vmDtvLib=e.vmDtvLib||{},i={},r=n.util.typeOf;n.isEngineeringBuild=!1,n.lib={configComponentsCb:{},setUrlParams:function(e){return t=e,this},correctToBooleanType:function(e,t){return"boolean"!==r(e="true"===e||"false"!==e&&e)&&(e=t),e},init:function(e,a){var o,s=n.error;function c(e,t){if(e)for(var n in t)e[n]&&t[n](e[n])}function l(l){null!==t&&void 0!==t||(t=location.search),function(e,t){try{n.netUtil.iterateNvpStr(t.substr(1),(function(t,i){try{for(var a,o,c,l,u=t+":",d=e,p=!1,h=/([^:\.\[\]]+)[\]\.]?([\.\[:])(?=(.?))/g;null!==(a=h.exec(u));)p=!0,o=d[a[1]],c=r(o),l=!isNaN(parseInt(a[3],10)),d="object"===c&&!l&&"."===a[2]||"array"===c&&l?o:d[a[1]]=l?[]:"."===a[2]?{}:i;if(!p)throw"unexpected syntax"}catch(e){s.logAndTrack(n.errorId,"Error trying to add parameter "+t+" from Url to config. "+e,void 0,"1/2",e,"hidden")}}))}catch(e){s.logAndTrack(n.errorId,"Error trying adding URL parameters to config"+e,void 0,"1/3",e,"hidden")}}(o,t),o=n.util.merge(o,a.configUpdate);var u=n.device.getDeviceModel();o.modelOverride&&o.modelOverride[u]&&delete(o=n.util.merge(o,o.modelOverride[u])).modelOverride;var d=o.vdl;n.configFileVersion=o.configFileVersion,n.liveAppId=d&&d.liveAppId?d.liveAppId:void 0,c(d,n.lib.configComponentsCb),n.device.init(o,(function(r){var u=o;o=null,u.vdl=void 0,delete u.vdl;var d=a.appHeight||document.documentElement.clientHeight;n.scale=d>=1080?1:.6667,c(u,i),l&&r&&s.trackError(new n.VmError(n.errorId,r.message,"1/5"+r.printable,"hidden")),function(r,s){n.lib.configComponentsCb=null,i=null,t=null,s||((s=o).vdl=void 0,delete s.vdl),n.device.keepCurChan(a.keepCurChan),e(r,s)}(l||(r?new n.VmError(5,r.message,r.printable):null),u)}),h)}function u(e){o=n.util.merge(o,e);var t=new n.Url(p).makeAbsolute(location.href);o.vmAbsConfigUrl=t.getUrl();var i=t.setFragment("").setQuery("").setFile("").getUrl();o.vmAbsConfigPath="/"===i.substr(-1,1)?i.substr(0,i.length-1):i,o.vmAbsConfigBase=i,l()}function d(e){var t=s.logAndCreate(4,"Error loading config file: "+p+", "+e,void 0,e.printable,e);h.mustHaveConfigFile?l(t):(s.trackError(new n.VmError(n.errorId,t.message,1+t.printable,"hidden")),l())}a=a||{},n.viewElement=a.viewId?document.querySelector(a.viewId):document.body,n.errorId=a.errorId||"LB1";var p,h=a.errorHandling||{};if(n.isEngineeringBuild&&n.engineeringBanner&&n.engineeringBanner.create(n.viewElement),o=n.util.clone(a.defaultConfig)||{},a.configUpdate&&(p=a.configUpdate.vmConfigUrl),!p&&location&&(p=n.netUtil.nvpStrToObj(location.search.substr(1)).vmConfigUrl),p||(p=a.configUrl),!p&&a.defaultConfig&&(p=a.defaultConfig.vmConfigUrl),p=n.device.updateConfigUrl(p)){var f=new n.Url(p).getFileExtension().toLowerCase();"js"===f||"jsonp"===f?n.jsonLoader.loadJsonp(p,u,d,!0,"jsonpCallback"):n.jsonLoader.loadJson(p,u,d,!0)}else l()},addConfigHandler:function(e,t){i[e]=t}}}(this),function(e){"use strict";var t,n={TCDC00000:"Cisco",TCDC8A000:"Samsung",TCDCF0000:"Cisco",TCDC68000:"Arris"},i=e.vmDtvLib||{},r=(i.util.typeOf,["TCDC00000","TCDC8A000","TCDCF0000"]),a=500,o=5e3;i.lib.configComponentsCb.device=function(e){null!=e.compassModels&&(r=r.concat(e.compassModels)),e.exitTimeoutMs>0&&(a=e.exitTimeoutMs),e.compassExitTimeoutMs>0&&(o=e.compassExitTimeoutMs),null!=e.manufacturerMappings&&(n=i.util.merge(n,e.manufacturerMappings))},i.device={},i.device.PIN_PURCHASE=tivo.client.PinType.PURCHASE_CONTROL,i.device.PIN_MASTER=tivo.client.PinType.PARENTAL_CONTROL,i.device.init=function(n,r,a){$_=n.messages,e.tivo.client.createClient({ready:function(e){i.tivoClient=e,t=e.getDevice(),r()},error:function(e){var t=i.error,n=t.logAndCreate(1,"Unable to get tivoClient"+e,void 0);a.dontNeedTivoClient?(t.trackError(new i.VmError(i.errorId,n.message,2+n.printable,"hidden")),r()):r(n)}})},i.device.keepCurChan=function(){},i.device.updateConfigUrl=function(e){if(e&&("/"===e.charAt(0)||"\\"===e.charAt(0))){var t=location.href;e=0===t.indexOf("https://content.dtv.virginmedia.com")||0===t.indexOf("http://tivo-apps-vm.is.dtv")?new i.Url("/publishConfig/htmlApps"+e).makeAbsolute(t).getUrl():"https://content.dtv.virginmedia.com/publishConfig/htmlApps"+e}return e},i.device.getMac=function(n){if(e.oipfObjectFactory){if(n){var r=i.oipf.getNetworkInterface(n);return r?r.macAddress:""}var a=i.oipf.getNetworkInterface("CABLE");if(a)return a.macAddress;var o=i.oipf.getNetworkInterface("ETHERNET");return o?o.macAddress:""}return i.tivoClient?t.getMacAddress(n.toLowerCase()):""},i.device.getDisplayEDID=function(e){try{e(t.getDisplayInfo())}catch(t){e(null)}},i.device.exitApp=function(t){t?setTimeout((function(){e.close()}),"COMPASS"===i.device.getDeviceModel()?o:a):e.close()},i.device.getAccountId=function(){return""},i.device.getDisplayInfo=function(e){try{e(t.getDisplayInfoObject())}catch(t){e(null)}},i.device.getDeviceId=function(){return t.getSerialNumber()},i.device.getDeviceModel=function(){if(e.oipfObjectFactory){var t=oipfObjectFactory.createConfigurationObject().localSystem.modelName;return-1===r.indexOf(t)?"LEAPFROG":"COMPASS"}return"COMPASS"},i.device.getDeviceManufacturer=function(){var e=oipfObjectFactory.createConfigurationObject().localSystem.modelName;return n[e]||e},i.device.getDevicePlatform=function(){return"TiVo"},i.device.getDeviceType=function(){return-1!==navigator.userAgent.indexOf("TiVo")?"STB":-1!==navigator.userAgent.indexOf("Opera-TvEmulator")?"EMULATOR":"PC"},i.device.hasRemote=function(){var e=i.device.getDeviceType();return"STB"===e||"EMULATOR"===e},i.device.getDeviceSerial=function(){return t.hardwareSerialNumber},i.device.getNetworkId=function(e){e(t.getNetworkId())},i.device.validatePin=function(e,n,r){n(t.isPinValid(r||i.device.PIN_MASTER,e))},i.device.isPinSet=function(e,n){e(t.isPinSet(n||i.device.PIN_PURCHASE))},i.device.getCountryCode=function(){return"gb"},i.device.getLanguageCode=function(){return"en"},i.device.isLiveApp=function(){return"DEV"!==i.buildEnvironment},i.device.splitTiVoUri=function(e){return 0!==e.indexOf("x-tivo:")?["",e]:(t=0===e.indexOf("x-tivo:web:sandbox")?e.indexOf(":",11)+1:e.indexOf(":",7)+1,[e.slice(0,t),e.slice(t)]);var t}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{};t.domUtil={createHtmlFrag:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t},positionShuffle:function(e,n){var i=1024-e.offsetWidth,r=648-e.offsetHeight,a=t.getViewportCoords(e.parentElement);return setInterval((function(){e.style.left=Math.floor(Math.random()*i)-a.left+128+"px",e.style.top=Math.floor(Math.random()*r)-a.top+62+"px"}),n)},getViewportCoords:function(n){var i=n.getBoundingClientRect(),r=t.viewElement,a=document.documentElement,o=e.pageYOffset||a.scrollTop||r.scrollTop,s=e.pageXOffset||a.scrollLeft||r.scrollLeft,c=a.clientTop||r.clientTop||0,l=a.clientLeft||r.clientLeft||0,u=i.top+o-c,d=i.left+s-l;return{top:Math.round(u),left:Math.round(d)}},startScrolling:function(e,t,n){var i=e.cloneNode(!0);i.setAttribute("style","display: inline; visibility: hidden; position: absolute; width: none; max-width:none"),e.parentNode.appendChild(i);var r=i.offsetWidth,a=e.offsetWidth,o=t||50,s=n||500,c=r/o,l=(r+a)/o,u=function(e,t,n,i){return!0===i?"-o-transition: all "+e+"s linear "+t+"ms; -o-transform: translate("+n+"px, 0); transition: all "+e+"s linear "+t+"ms; transform: translate("+n+"px, 0);":"-o-transition: all "+e+"s linear "+t+"ms; -o-transform: translate(-"+n+"px, 0); transition: all "+e+"s linear "+t+"ms; transform: translate(-"+n+"px, 0);"};function d(e){e.srcElement.setAttribute("style",""),e.srcElement.setAttribute("style",function(e){return"-o-transition: none; -o-transform: translate("+e+"px, 0); transition: none; transform: translate("+e+"px, 0);"}(a)),setTimeout((function(){e.srcElement.setAttribute("style",u(l,s,r)),e.srcElement.style.overflow="visible",e.srcElement.setAttribute("data-scrollingcss",e.srcElement.getAttribute("style"))}),0)}i.parentNode.removeChild(i),r>a&&(e.setAttribute("style",u(c,s,r)),e.style.overflow="visible",e.setAttribute("data-scrollingcss",e.getAttribute("style")),e.addEventListener("otransitionend",d,!1),e.addEventListener("transitionend",d,!1))},stopScrolling:function(e){var n=e.getAttribute("data-scrollingcss");if(void 0!==n&&null!==n){var i=new RegExp(t.util.escapeRegexSpecialChars(n),"gi");e.setAttribute("style",e.getAttribute("style").replace(i,""))}},prepareScrolling:function(e){var t=document.createElement("div");return t.innerHTML=e.innerHTML,t.setAttribute("style","width: none; max-width: none; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; position:relative;"),t.classList.add("vdl_marqueeText"),e.innerHTML="",e.appendChild(t),t}}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{},n=t.util.typeOf;t.VmError=function(e,t,i,r){var a=Error.call(this,t);this.message=a.message,this.type=e,this.category=r||"displayed",this.additionalCode=i,this.printable="","number"===n(e)&&!isNaN(e)&&e<1e4?this.printable+="/"+String(e):"string"===n(e)&&/^[A-Z][A-Z]\d{1,4}$/.exec(e)&&(this.printable=e),null!==i&&void 0!==i&&""!==i&&(i=String(i),this.printable+=("/"===i.charAt(0)?"":"/")+i)};var i=t.VmError.prototype=Object.create(Error.prototype);t.VmError.constructor=t.VmError,i.name="VmError"}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{},n=(t.error=t.error||{},function(e,n,i,r,a,o){return new t.VmError(e,n,r,o)}),i=function(e){return"<p>(error "+e+")</p>"},r=function(e,n){var i,r,a="";return null!==n&&void 0!==n&&(a+=n),e&&(e.printable&&(a+=e.printable),i=e.message,r=e.category),t.tracking&&t.tracking.trackError(a,i,r),a};t.error={logAndCreate:n,logCreateCall:function(e,t,i,r,a,o,s){var c=n(e,t,0,a,0,s);return r&&r(c),c},toHtml:i,trackError:r,logAndTrack:function(e,t,i,a,o,s){return r(n(e,t,0,a,0,s))},trackAndGenerateHtml:function(e,t){var n=r(e,t);return i(n)}}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{};t.oipf=t.oipf||{},t.oipf.getNetworkInterface=function(e){var t,n=oipfObjectFactory.createConfigurationObject().localSystem;"CABLE"===e&&(e="DOCSIS");for(var i=0;i<n.networkInterfaces.length;i++)if((t=n.networkInterfaces.item(i)).type===e)return t;return null}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{},n=t.util.typeOf,i="-._~?/:@",r=i+"=";function a(e,t){var n=e.indexOf(t);return-1!==n?[e.slice(0,n),e.slice(n+t.length)]:[e]}function o(e,t,n,i,r,o){var s,c,l;e||(e=""),null!==r&&void 0!==r||(r="&"),null!==o&&void 0!==o||(o="="),s=e.split(r);for(var u=0;u<s.length;u++)(c=(l=a(s[u],o))[0])&&(c=i?c:decodeURIComponent(c),n&&c&&(c=c.toLowerCase()),c&&t(c,i?l[1]:decodeURIComponent(l[1])))}function s(e,t){var n,i="";"string"!=typeof e&&(e="");for(var r=0;r<e.length;r++)(n=e.charAt(r))>="A"&&n<="Z"||n>="a"&&n<="9"||n>="0"&&n<="9"||t.indexOf(n)>=0||(n=escape(n)),i+=n;return i}t.netUtil={iterateNvpStr:o,nvpStrToObj:function(e,t,n,i,r,a){var s={};return o(e,a?function(e,t){s[e]||(s[e]=[]),s[e].push(t)}:function(e,t){s[e]=t},t,n,i,r),s},objToNvpStr:function(e,t,a,o){var c,l,u="";function d(e,n){t?u+=a+e+o+n:("string"!=typeof n&&(n=String(n)),u+=a+s(e,i)+o+s(n,r))}for(c in null!==a&&void 0!==a||(a="&"),null!==o&&void 0!==o||(o="="),e)if("array"===n(e[c]))for(l=0;l<e[c].length;l++)d(c,e[c][l]);else d(c,e[c]);return u=u.substring(1)},escapeStr:s,splitOnFirst:a,hostValidChars:"-._~!$&'()*+,;=",pathValidChars:"-._~!$&'()*+,;=@",queryNameValidChars:i,queryValueValidChars:r,fragmentValidChars:"-._~!$&'()*+,;=?/:@"}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{};t.Url=a;var n=t.netUtil,i=t.util.isObjEmpty,r=t.util.typeOf;function a(e){this.protocol="",this.user="",this.host="",this.port="",this.pathSegments=[],this.queryParameters={},this.fragment="",e&&this.setUrl(e)}var o=a.prototype;o.getUrl=function(e){var t="",r=[];return this.protocol&&(t+=this.protocol+":"),(this.user||this.host||this.port)&&(t+="//",this.user&&(t+=(e?this.user:n.escapeStr(this.user,n.hostValidChars))+"@"),t+=e?this.host:n.escapeStr(this.host,n.hostValidChars),this.port&&(t+=":"+this.port)),this.pathSegments.forEach((function(t,i,a){r[i]=e?t:n.escapeStr(t,n.pathValidChars)})),t+=r.join("/"),i(this.queryParameters)||(t+="?"+n.objToNvpStr(this.queryParameters,e)),this.fragment&&(t+="#"+(e?this.fragment:n.escapeStr(this.fragment,n.fragmentValidChars))),t},o.getPathExFile=function(){var e=this.getPath(),t=e.lastIndexOf("/");return-1!==t?e.substring(0,t+1):""},o.getFile=function(){return this.pathSegments.length?this.pathSegments[this.pathSegments.length-1]:""},o.getFileExtension=function(){var e=this.getFile().match("[.](.*$)");return e?e[1]:""},o.getFileName=function(){var e=this.getFile().match("(^.*?)[.]");return e?e[1]:""},o.getProtocol=function(){return this.protocol},o.getUser=function(){return this.user},o.getHost=function(){return this.host},o.getPort=function(){return this.port},o.getPath=function(){return this.pathSegments.join("/")},o.getSegments=function(){var e=[];return this.pathSegments.forEach((function(t,n){e[n]=t})),e},o.getFragment=function(){return this.fragment},o.getQuery=function(){return n.objToNvpStr(this.queryParameters)},o.getQueryParameters=function(e){var t={};for(var n in this.queryParameters)t[e?n.toLowerCase():n]=this.queryParameters[n];return t},o.getQueryParameter=function(e,t){if(!t)return this.queryParameters[e];for(var n in this.queryParameters)if(e.toLowerCase()===n.toLowerCase())return this.queryParameters[n]},o.setUrl=function(e,t){var i,a,o,s,c,l,u,d,p="",h="",f="";return this.protocol="",this.user="",this.host="",this.port="",this.queryParameters=null,this.fragment="",this.pathSegments=null,"string"!==r(e)&&(e=""),a=n.splitOnFirst(e,"#"),this.fragment=a[1]?t?a[1]:decodeURIComponent(a[1]):"",void 0!==(o=n.splitOnFirst(a[0],"?"))[1]&&(f=o[1]),(u=n.splitOnFirst(o[0],":"))[1]?(this.protocol=u[0],d=u[1]):d=u[0],"//"===d.substr(0,2)?(d=d.substr(2),p=(s=n.splitOnFirst(d,"/"))[0],void 0!==s[1]&&(h="/"+s[1]),(c=n.splitOnFirst(p,"@"))[1]?(this.user=t?c[0]:decodeURIComponent(c[0]),i=c[1]):i=c[0],l=n.splitOnFirst(i,":"),this.host=t?l[0]:decodeURIComponent(l[0]),void 0!==l[1]&&(this.port=l[1])):h=d||"",this.pathSegments=h.split("/"),this.pathSegments.forEach((function(e,n,i){i[n]=t?e:decodeURIComponent(e)})),this.queryParameters=n.nvpStrToObj(f,!1,t),this},o.setFile=function(e){return"string"!==r(e)&&(e=""),this.pathSegments.length&&(this.pathSegments[this.pathSegments.length-1]=e),this},o.setFileExtension=function(e){return"string"!==r(e)&&(e=""),this.pathSegments.length&&(this.pathSegments[this.pathSegments.length-1]=this.getFileName()+"."+e),this},o.setFileName=function(e){return"string"!==r(e)&&(e=""),this.pathSegments.length&&(this.pathSegments[this.pathSegments.length-1]=e+"."+this.getFileExtension()),this},o.setProtocol=function(e){return"string"!==r(e)&&(e=""),this.protocol=e,this},o.setUser=function(e){return"string"!==r(e)&&(e=""),this.user=e,this},o.setHost=function(e){return"string"!==r(e)&&(e=""),this.host=e,this},o.setPort=function(e){return null!==e&&void 0!==e||(e=""),this.port=e,this},o.setPath=function(e){return"string"!==r(e)&&(e=""),this.pathSegments=e.split("/"),this},o.setSegments=function(e){"array"!==r(e)&&(e=[]);var t=[];return e.forEach((function(e,n){t[n]=e})),this.pathSegments=t,this},o.addFilePath=function(e){return"string"!==r(e)&&(e=""),this.pathSegments=this.pathSegments.concat(e.split("/"),this.pathSegments.pop()),this},o.setFragment=function(e){return"string"!==r(e)&&(e=""),this.fragment=e,this},o.setQuery=function(e){return"string"!==r(e)&&(e=""),this.queryParameters=n.nvpStrToObj(e),this},o.setQueryParameters=function(e,t){for(var n in"object"!==r(e)&&(e={}),t||(this.queryParameters={}),e)this.queryParameters[n]=e[n];return this},o.setQueryParameter=function(e,t,n){if("string"!==r(e)&&(e=""),n)for(var i in this.queryParameters)e.toLowerCase()===i.toLowerCase()&&(this.queryParameters[i]=t);else this.queryParameters[e]=t;return this},o.removeQueryParameter=function(e){return delete this.queryParameters[e],this},o.isRelative=function(){return""===this.protocol},o.makeAbsolute=function(e){var n,r,a=[];return this.isRelative()?("string"==typeof e&&(e=new t.Url(e)),""===this.getUrl()?(this.setUrl(e.getUrl()),this):(this.protocol=e.getProtocol(),""!==this.user||""!==this.host||""!==this.port?this:(this.host=e.getHost(),this.port=e.getPort(),this.user=e.getUser(),"/"===(n=this.getPath()).substring(0,1)?this:""===n?(this.setPath(e.getPath()),i(this.queryParameters)&&this.setQuery(e.getQuery()),this):(this.setPath(this.setPath(e.getPath()).setFile("").getPath()+n),this.pathSegments.forEach((function(e){"."!==e&&(".."===e&&a.length&&".."!==(r=a[a.length-1])&&""!==r?a.pop():a.push(e))})),this.pathSegments=a,this)))):this}}(this),function(){"use strict";var e=window.vmDtvLib=window.vmDtvLib||{},t=null!=window.oipfObjectFactory,n="COMPASS"===e.device.getDeviceModel(),i=t?27:8,r=t?"Esc":"Backspace",a={DOWN:40,LEFT:37,RIGHT:39,UP:38,OK:13,THUMBSUP:429,THUMBSDOWN:437,CHANNELUP:425,CHANNELDOWN:424,RECORD:416,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,LASTCHAN:13,PLAY:415,PAUSE:463,SLOW:419,FORWARD:417,REVERSE:412,TEXT:459,INFO:457,CONTEXTMENU:null,STOP:413,SKIPFORWARD:t?423:92,SKIPREVERSE:n?i:422,BACK:i,YELLOW:405,BLUE:406,RED:403,GREEN:404,SUBTITLES:460},o={DOWN:"Down",LEFT:"Left",RIGHT:"Right",UP:"Up",OK:"Enter",THUMBSUP:"StoreFavorite0",THUMBSDOWN:"ClearFavorite0",CHANNELUP:"MediaTrackNext",CHANNELDOWN:"MediaTrackPrevious",RECORD:"MediaRecord",NUM0:"0",NUM1:"1",NUM2:"2",NUM3:"3",NUM4:"4",NUM5:"5",NUM6:"6",NUM7:"7",NUM8:"8",NUM9:"9",LASTCHAN:"Enter",PLAY:"MediaPlay",PAUSE:"MediaPlayPause",SLOW:"PlaySpeedDown",FORWARD:"FastFwd",REVERSE:"MediaRewind",TEXT:"Teletext",INFO:"Info",STOP:"MediaStop",SKIPFORWARD:t?"MediaTrackEnd":"MacControl",SKIPREVERSE:n?r:"MediaTrackStart",BACK:r,YELLOW:"Yellow",BLUE:"Blue",RED:"Red",GREEN:"Green",SUBTITLES:"Subtitle"};switch(e.device.getDeviceType()){case"PC":a.RED=221,o.RED="]",a.GREEN=219,o.GREEN="[",a.YELLOW=220,o.YELLOW="\\",a.BLUE=222,o.BLUE="#",a.STOP=35,o.STOP="End",a.PLAY=45,o.PLAY="Insert",a.CLEAR=46,o.CLEAR="Delete",a.PAUSE=19,o.PAUSE="Pause",a.CHANNELUP=33,o.CHANNELUP="PageUp",a.CHANNELDOWN=34,o.CHANNELDOWN="PageDown",a.REVERSE=191,o.REVERSE="/",a.FORWARD=36,o.FORWARD="Home",a.SLOW=192,o.SLOW="'",a.SKIPFORWARD=187,o.SKIPFORWARD="=",a.SKIPREVERSE=189,o.SKIPREVERSE="-",a.THUMBSUP=65,o.THUMBSUP="a",a.THUMBSDOWN=90,o.THUMBSDOWN="z",a.RECORD=82,o.RECORD="r",a.INFO=73,o.INFO="i";break;case"EMULATOR":a.CHANNELUP=33,o.CHANNELUP="PageUp",a.CHANNELDOWN=34,o.CHANNELDOWN="PageDown"}e.keyCodes=a,e.keys=o}(),function(){"use strict";var e=window.vmDtvLib=window.vmDtvLib||{},t=!1;e.sound=function(n){!t&&e.tivoClient&&e.tivoClient.getDevice().playTiVoSound(window.tivo.client.TiVoSound[n])},e.disableSound=function(e){t=e}}();var adobeCodeVersion="Appm 2.6.0 - S - 2017-12-09";function AppMeasurement(e){var t=this;t.version="2.6.0";var n=window;n.s_c_in||(n.s_c_il=[],n.s_c_in=0),t._il=n.s_c_il,t._in=n.s_c_in,t._il[t._in]=t,n.s_c_in++,t._c="s_c";var i=AppMeasurement.Pb;i||(i=null);var r,a,o,s=n;try{for(r=s.parent,a=s.location;r&&r.location&&a&&""+r.location!=""+a&&s.location&&""+r.location!=""+s.location&&r.location.host==a.host;)r=(s=r).parent}catch(e){}t.F=function(e){},t.Ma=function(e){return""+parseInt(e)==""+e},t.replace=function(e,t,n){return!e||0>e.indexOf(t)?e:e.split(t).join(n)},t.escape=function(e){var n,i;if(!e)return e;for(e=encodeURIComponent(e),n=0;7>n;n++)i="+~!*()'".substring(n,n+1),0<=e.indexOf(i)&&(e=t.replace(e,i,"%"+i.charCodeAt(0).toString(16).toUpperCase()));return e},t.unescape=function(e){if(!e)return e;e=0<=e.indexOf("+")?t.replace(e,"+"," "):e;try{return decodeURIComponent(e)}catch(e){}return unescape(e)},t.wb=function(){var e,i=n.location.hostname,r=t.fpCookieDomainPeriods;if(r||(r=t.cookieDomainPeriods),i&&!t.Ea&&!/^[0-9.]+$/.test(i)&&(r=2<(r=r?parseInt(r):2)?r:2,0<=(e=i.lastIndexOf(".")))){for(;0<=e&&1<r;)e=i.lastIndexOf(".",e-1),r--;t.Ea=0<e?i.substring(e):i}return t.Ea},t.c_r=t.cookieRead=function(e){e=t.escape(e);var n=" "+t.d.cookie,i=n.indexOf(" "+e+"="),r=0>i?i:n.indexOf(";",i);return"[[B]]"!=(e=0>i?"":t.unescape(n.substring(i+2+e.length,0>r?n.length:r)))?e:""},t.c_w=t.cookieWrite=function(e,n,i){var r,a=t.wb(),o=t.cookieLifetime;return n=""+n,o=o?(""+o).toUpperCase():"",i&&"SESSION"!=o&&"NONE"!=o&&((r=""!=n?parseInt(o||0):-60)?(i=new Date).setTime(i.getTime()+1e3*r):1==i&&(r=(i=new Date).getYear(),i.setYear(r+5+(1900>r?1900:0)))),e&&"NONE"!=o?(t.d.cookie=t.escape(e)+"="+t.escape(""!=n?n:"[[B]]")+"; path=/;"+(i&&"SESSION"!=o?" expires="+i.toUTCString()+";":"")+(a?" domain="+a+";":""),t.cookieRead(e)==n):0},t.L=[],t.ia=function(e,n,i){if(t.Fa)return 0;t.maxDelay||(t.maxDelay=250);var r=0,a=(new Date).getTime()+t.maxDelay,o=t.d.visibilityState,s=["webkitvisibilitychange","visibilitychange"];if(o||(o=t.d.webkitVisibilityState),o&&"prerender"==o){if(!t.ja)for(t.ja=1,i=0;i<s.length;i++)t.d.addEventListener(s[i],(function(){var e=t.d.visibilityState;e||(e=t.d.webkitVisibilityState),"visible"==e&&(t.ja=0,t.delayReady())}));r=1,a=0}else i||t.p("_d")&&(r=1);return r&&(t.L.push({m:e,a:n,t:a}),t.ja||setTimeout(t.delayReady,t.maxDelay)),r},t.delayReady=function(){var e,n=(new Date).getTime(),i=0;for(t.p("_d")?i=1:t.xa();0<t.L.length;){if(e=t.L.shift(),i&&!e.t&&e.t>n){t.L.unshift(e),setTimeout(t.delayReady,parseInt(t.maxDelay/2));break}t.Fa=1,t[e.m].apply(t,e.a),t.Fa=0}},t.setAccount=t.sa=function(e){var n,i;if(!t.ia("setAccount",arguments))if(t.account=e,t.allAccounts)for(n=t.allAccounts.concat(e.split(",")),t.allAccounts=[],n.sort(),i=0;i<n.length;i++)0!=i&&n[i-1]==n[i]||t.allAccounts.push(n[i]);else t.allAccounts=e.split(",")},t.foreachVar=function(e,n){var i,r,a,o,s="";for(a=r="",t.lightProfileID?(i=t.P,(s=t.lightTrackVars)&&(s=","+s+","+t.na.join(",")+",")):(i=t.g,(t.pe||t.linkType)&&(s=t.linkTrackVars,r=t.linkTrackEvents,t.pe&&(a=t.pe.substring(0,1).toUpperCase()+t.pe.substring(1),t[a]&&(s=t[a].Nb,r=t[a].Mb))),s&&(s=","+s+","+t.H.join(",")+","),r&&s&&(s+=",events,")),n&&(n=","+n+","),r=0;r<i.length;r++)a=i[r],(o=t[a])&&(!s||0<=s.indexOf(","+a+","))&&(!n||0<=n.indexOf(","+a+","))&&e(a,o)},t.r=function(e,n,i,r,a){var o,s,c,l,u="",d=0;if("contextData"==e&&(e="c"),n){for(o in n)if(!(Object.prototype[o]||a&&o.substring(0,a.length)!=a)&&n[o]&&(!i||0<=i.indexOf(","+(r?r+".":"")+o+","))){if(c=!1,d)for(s=0;s<d.length;s++)o.substring(0,d[s].length)==d[s]&&(c=!0);if(!c&&(""==u&&(u+="&"+e+"."),s=n[o],a&&(o=o.substring(a.length)),0<o.length))if(0<(c=o.indexOf(".")))c=(a||"")+(s=o.substring(0,c))+".",d||(d=[]),d.push(c),u+=t.r(s,n,i,r,c);else if("boolean"==typeof s&&(s=s?"true":"false"),s){if("retrieveLightData"==r&&0>a.indexOf(".contextData."))switch(c=o.substring(0,4),l=o.substring(4),o){case"transactionID":o="xact";break;case"channel":o="ch";break;case"campaign":o="v0";break;default:t.Ma(l)&&("prop"==c?o="c"+l:"eVar"==c?o="v"+l:"list"==c?o="l"+l:"hier"==c&&(o="h"+l,s=s.substring(0,255)))}u+="&"+t.escape(o)+"="+t.escape(s)}}""!=u&&(u+="&."+e)}return u},t.usePostbacks=0,t.zb=function(){var e,n,r,a,o,s,c,l,u="",d="",p="",h=a="";if(t.lightProfileID?(e=t.P,(d=t.lightTrackVars)&&(d=","+d+","+t.na.join(",")+",")):(e=t.g,(t.pe||t.linkType)&&(d=t.linkTrackVars,p=t.linkTrackEvents,t.pe&&(a=t.pe.substring(0,1).toUpperCase()+t.pe.substring(1),t[a]&&(d=t[a].Nb,p=t[a].Mb))),d&&(d=","+d+","+t.H.join(",")+","),p&&(p=","+p+",",d&&(d+=",events,")),t.events2&&(h+=(""!=h?",":"")+t.events2)),t.visitor&&t.visitor.getCustomerIDs){if(a=i,o=t.visitor.getCustomerIDs())for(n in o)Object.prototype[n]||"object"==typeof(r=o[n])&&(a||(a={}),r.id&&(a[n+".id"]=r.id),r.authState&&(a[n+".as"]=r.authState));a&&(u+=t.r("cid",a))}for(t.AudienceManagement&&t.AudienceManagement.isReady()&&(u+=t.r("d",t.AudienceManagement.getEventCallConfigParams())),n=0;n<e.length;n++){if(a=e[n],o=t[a],r=a.substring(0,4),s=a.substring(4),o||("events"==a&&h?(o=h,h=""):"marketingCloudOrgID"==a&&t.visitor&&(o=t.visitor.marketingCloudOrgID)),o&&(!d||0<=d.indexOf(","+a+","))){switch(a){case"customerPerspective":a="cp";break;case"marketingCloudOrgID":a="mcorgid";break;case"supplementalDataID":a="sdid";break;case"timestamp":a="ts";break;case"dynamicVariablePrefix":a="D";break;case"visitorID":a="vid";break;case"marketingCloudVisitorID":a="mid";break;case"analyticsVisitorID":a="aid";break;case"audienceManagerLocationHint":a="aamlh";break;case"audienceManagerBlob":a="aamb";break;case"authState":a="as";break;case"pageURL":a="g",255<o.length&&(t.pageURLRest=o.substring(255),o=o.substring(0,255));break;case"pageURLRest":a="-g";break;case"referrer":a="r";break;case"vmk":case"visitorMigrationKey":a="vmt";break;case"visitorMigrationServer":a="vmf",t.ssl&&t.visitorMigrationServerSecure&&(o="");break;case"visitorMigrationServerSecure":a="vmf",!t.ssl&&t.visitorMigrationServer&&(o="");break;case"charSet":a="ce";break;case"visitorNamespace":a="ns";break;case"cookieDomainPeriods":a="cdp";break;case"cookieLifetime":a="cl";break;case"variableProvider":a="vvp";break;case"currencyCode":a="cc";break;case"channel":a="ch";break;case"transactionID":a="xact";break;case"campaign":a="v0";break;case"latitude":a="lat";break;case"longitude":a="lon";break;case"resolution":a="s";break;case"colorDepth":a="c";break;case"javascriptVersion":a="j";break;case"javaEnabled":a="v";break;case"cookiesEnabled":a="k";break;case"browserWidth":a="bw";break;case"browserHeight":a="bh";break;case"connectionType":a="ct";break;case"homepage":a="hp";break;case"events":if(h&&(o+=(""!=o?",":"")+h),p)for(s=o.split(","),o="",r=0;r<s.length;r++)0<=(l=(c=s[r]).indexOf("="))&&(c=c.substring(0,l)),0<=(l=c.indexOf(":"))&&(c=c.substring(0,l)),0<=p.indexOf(","+c+",")&&(o+=(o?",":"")+s[r]);break;case"events2":o="";break;case"contextData":u+=t.r("c",t[a],d,a),o="";break;case"lightProfileID":a="mtp";break;case"lightStoreForSeconds":a="mtss",t.lightProfileID||(o="");break;case"lightIncrementBy":a="mti",t.lightProfileID||(o="");break;case"retrieveLightProfiles":a="mtsr";break;case"deleteLightProfiles":a="mtsd";break;case"retrieveLightData":t.retrieveLightProfiles&&(u+=t.r("mts",t[a],d,a)),o="";break;default:t.Ma(s)&&("prop"==r?a="c"+s:"eVar"==r?a="v"+s:"list"==r?a="l"+s:"hier"==r&&(a="h"+s,o=o.substring(0,255)))}o&&(u+="&"+a+"="+("pev"!=a.substring(0,3)?t.escape(o):o))}"pev3"==a&&t.e&&(u+=t.e)}return u},t.D=function(e){var t=e.tagName;return"undefined"!=""+e.Sb||"undefined"!=""+e.Ib&&"HTML"!=(""+e.Ib).toUpperCase()?"":("SHAPE"==(t=t&&t.toUpperCase?t.toUpperCase():"")&&(t=""),t&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},t.Ia=function(e){var t,i,r,a=n.location,o=e.href?e.href:"";return t=o.indexOf(":"),i=o.indexOf("?"),r=o.indexOf("/"),o&&(0>t||0<=i&&t>i||0<=r&&t>r)&&(i=e.protocol&&1<e.protocol.length?e.protocol:a.protocol?a.protocol:"",t=a.pathname.lastIndexOf("/"),o=(i?i+"//":"")+(e.host?e.host:a.host?a.host:"")+("/"!=o.substring(0,1)?a.pathname.substring(0,0>t?0:t)+"/":"")+o),o},t.M=function(e){var n,i,r=t.D(e),a="",o=0;return r&&(n=e.protocol,i=e.onclick,!e.href||"A"!=r&&"AREA"!=r||i&&n&&!(0>n.toLowerCase().indexOf("javascript"))?i?(a=t.replace(t.replace(t.replace(t.replace(""+i,"\r",""),"\n",""),"\t","")," ",""),o=2):"INPUT"==r||"SUBMIT"==r?(e.value?a=e.value:e.innerText?a=e.innerText:e.textContent&&(a=e.textContent),o=3):"IMAGE"==r&&e.src&&(a=e.src):a=t.Ia(e),a)?{id:a.substring(0,100),type:o}:0},t.Qb=function(e){for(var n=t.D(e),i=t.M(e);e&&!i&&"BODY"!=n;)(e=e.parentElement?e.parentElement:e.parentNode)&&(n=t.D(e),i=t.M(e));return i&&"BODY"!=n||(e=0),e&&(0<=(n=e.onclick?""+e.onclick:"").indexOf(".tl(")||0<=n.indexOf(".trackLink("))&&(e=0),e},t.Hb=function(){var e,i,r,a,o=t.linkObject,s=t.linkType,c=t.linkURL;if(t.oa=1,o||(t.oa=0,o=t.clickObject),o){for(e=t.D(o),i=t.M(o);o&&!i&&"BODY"!=e;)(o=o.parentElement?o.parentElement:o.parentNode)&&(e=t.D(o),i=t.M(o));if(i&&"BODY"!=e||(o=0),o&&!t.linkObject){var l=o.onclick?""+o.onclick:"";(0<=l.indexOf(".tl(")||0<=l.indexOf(".trackLink("))&&(o=0)}}else t.oa=1;if(!c&&o&&(c=t.Ia(o)),c&&!t.linkLeaveQueryString&&0<=(r=c.indexOf("?"))&&(c=c.substring(0,r)),!s&&c){var u,d=0,p=0;if(t.trackDownloadLinks&&t.linkDownloadFileTypes)for(r=(l=c.toLowerCase()).indexOf("?"),a=l.indexOf("#"),0<=r?0<=a&&a<r&&(r=a):r=a,0<=r&&(l=l.substring(0,r)),r=t.linkDownloadFileTypes.toLowerCase().split(","),a=0;a<r.length;a++)(u=r[a])&&l.substring(l.length-(u.length+1))=="."+u&&(s="d");if(t.trackExternalLinks&&!s&&(l=c.toLowerCase(),t.La(l)&&(t.linkInternalFilters||(t.linkInternalFilters=n.location.hostname),r=0,t.linkExternalFilters?(r=t.linkExternalFilters.toLowerCase().split(","),d=1):t.linkInternalFilters&&(r=t.linkInternalFilters.toLowerCase().split(",")),r))){for(a=0;a<r.length;a++)u=r[a],0<=l.indexOf(u)&&(p=1);p?d&&(s="e"):d||(s="e")}}t.linkObject=o,t.linkURL=c,t.linkType=s,(t.trackClickMap||t.trackInlineStats)&&(t.e="",o&&(s=t.pageName,c=1,o=o.sourceIndex,s||(s=t.pageURL,c=0),n.s_objectID&&(i.id=n.s_objectID,o=i.type=1),s&&i&&i.id&&e&&(t.e="&pid="+t.escape(s.substring(0,255))+(c?"&pidt="+c:"")+"&oid="+t.escape(i.id.substring(0,100))+(i.type?"&oidt="+i.type:"")+"&ot="+e+(o?"&oi="+o:""))))},t.Ab=function(){var e=t.oa,n=t.linkType,i=t.linkURL,r=t.linkName;if(n&&(i||r)&&("d"!=(n=n.toLowerCase())&&"e"!=n&&(n="o"),t.pe="lnk_"+n,t.pev1=i?t.escape(i):"",t.pev2=r?t.escape(r):"",e=1),t.abort&&(e=0),t.trackClickMap||t.trackInlineStats||t.ActivityMap){n={},i=0;var a,o,s,c=(l=t.cookieRead("s_sq"))?l.split("&"):0,l=0;if(c)for(a=0;a<c.length;a++)o=c[a].split("="),r=t.unescape(o[0]).split(","),n[o=t.unescape(o[1])]=r;for(s in r=t.account.split(","),a={},t.contextData)s&&!Object.prototype[s]&&"a.activitymap."==s.substring(0,14)&&(a[s]=t.contextData[s],t.contextData[s]="");if(t.e=t.r("c",a)+(t.e?t.e:""),e||t.e){for(o in e&&!t.e&&(l=1),n)if(!Object.prototype[o])for(s=0;s<r.length;s++)for(l&&(c=n[o].join(","))==t.account&&(t.e+=("&"!=o.charAt(0)?"&":"")+o,n[o]=[],i=1),a=0;a<n[o].length;a++)(c=n[o][a])==r[s]&&(l&&(t.e+="&u="+t.escape(c)+("&"!=o.charAt(0)?"&":"")+o+"&u=0"),n[o].splice(a,1),i=1);if(e||(i=1),i){for(o in l="",a=2,!e&&t.e&&(l=t.escape(r.join(","))+"="+t.escape(t.e),a=1),n)!Object.prototype[o]&&0<a&&0<n[o].length&&(l+=(l?"&":"")+t.escape(n[o].join(","))+"="+t.escape(o),a--);t.cookieWrite("s_sq",l)}}}return e},t.Bb=function(){if(!t.Lb){var e,n,i,r,a=new Date,o=s.location,c=n=e="",l="1.2",u=t.cookieWrite("s_cc","true",0)?"Y":"N",d="",p="";if(a.setUTCDate&&(l="1.3",(0).toPrecision&&(l="1.5",(a=[]).forEach))){l="1.6",n=0,e={};try{(n=new Iterator(e)).next&&(l="1.7",a.reduce&&(l="1.8").trim&&(l="1.8.1",Date.parse&&(l="1.8.2",Object.create&&(l="1.8.5"))))}catch(e){}}e=screen.width+"x"+screen.height,c=navigator.javaEnabled()?"Y":"N",n=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,i=t.w.innerWidth?t.w.innerWidth:t.d.documentElement.offsetWidth,r=t.w.innerHeight?t.w.innerHeight:t.d.documentElement.offsetHeight;try{t.b.addBehavior("#default#homePage"),d=t.b.Rb(o)?"Y":"N"}catch(e){}try{t.b.addBehavior("#default#clientCaps"),p=t.b.connectionType}catch(e){}t.resolution=e,t.colorDepth=n,t.javascriptVersion=l,t.javaEnabled=c,t.cookiesEnabled=u,t.browserWidth=i,t.browserHeight=r,t.connectionType=p,t.homepage=d,t.Lb=1}},t.Q={},t.loadModule=function(e,i){var r=t.Q[e];if(!r){r=n["AppMeasurement_Module_"+e]?new n["AppMeasurement_Module_"+e](t):{},t.Q[e]=t[e]=r,r.eb=function(){return r.ib},r.jb=function(n){(r.ib=n)&&(t[e+"_onLoad"]=n,t.ia(e+"_onLoad",[t,r],1)||n(t,r))};try{Object.defineProperty?Object.defineProperty(r,"onLoad",{get:r.eb,set:r.jb}):r._olc=1}catch(e){r._olc=1}}i&&(t[e+"_onLoad"]=i,t.ia(e+"_onLoad",[t,r],1)||i(t,r))},t.p=function(e){var n,i;for(n in t.Q)if(!Object.prototype[n]&&(i=t.Q[n])&&(i._olc&&i.onLoad&&(i._olc=0,i.onLoad(t,i)),i[e]&&i[e]()))return 1;return 0},t.Db=function(){var e=Math.floor(1e13*Math.random()),n=t.visitorSampling,i=t.visitorSamplingGroup,r=(i="s_vsn_"+(t.visitorNamespace?t.visitorNamespace:t.account)+(i?"_"+i:""),t.cookieRead(i));if(n){if(n*=100,r&&(r=parseInt(r)),!r){if(!t.cookieWrite(i,e))return 0;r=e}if(r%1e4>n)return 0}return 1},t.R=function(e,n){var i,r,a,o,s,c;for(i=0;2>i;i++)for(r=0<i?t.Aa:t.g,a=0;a<r.length;a++)if((s=e[o=r[a]])||e["!"+o]){if(!n&&("contextData"==o||"retrieveLightData"==o)&&t[o])for(c in t[o])s[c]||(s[c]=t[o][c]);t[o]=s}},t.Va=function(e,n){var i,r,a,o;for(i=0;2>i;i++)for(r=0<i?t.Aa:t.g,a=0;a<r.length;a++)e[o=r[a]]=t[o],n||e[o]||(e["!"+o]=1)},t.vb=function(e){var t,n,i,r,a,o,s=0,c="",l="";if(e&&255<e.length&&0<(n=(t=""+e).indexOf("?"))&&(o=t.substring(n+1),i=0,"http://"==(r=(t=t.substring(0,n)).toLowerCase()).substring(0,7)?i+=7:"https://"==r.substring(0,8)&&(i+=8),0<(n=r.indexOf("/",i))&&(r=r.substring(i,n),a=t.substring(n),t=t.substring(0,n),0<=r.indexOf("google")?s=",q,ie,start,search_key,word,kw,cd,":0<=r.indexOf("yahoo.co")&&(s=",p,ei,"),s&&o))){if((e=o.split("&"))&&1<e.length){for(i=0;i<e.length;i++)0<(n=(r=e[i]).indexOf("="))&&0<=s.indexOf(","+r.substring(0,n)+",")?c+=(c?"&":"")+r:l+=(l?"&":"")+r;c&&l?o=c+"&"+l:l=""}e=t+(0<(n=253-(o.length-l.length)-t.length)?a.substring(0,n):"")+"?"+o}return e},t.ab=function(e){var n=t.d.visibilityState,i=["webkitvisibilitychange","visibilitychange"];if(n||(n=t.d.webkitVisibilityState),n&&"prerender"==n){if(e)for(n=0;n<i.length;n++)t.d.addEventListener(i[n],(function(){var n=t.d.visibilityState;n||(n=t.d.webkitVisibilityState),"visible"==n&&e()}));return!1}return!0},t.ea=!1,t.J=!1,t.lb=function(){t.J=!0,t.j()},t.ca=!1,t.V=!1,t.hb=function(e){t.marketingCloudVisitorID=e,t.V=!0,t.j()},t.fa=!1,t.W=!1,t.mb=function(e){t.visitorOptedOut=e,t.W=!0,t.j()},t.Z=!1,t.S=!1,t.Xa=function(e){t.analyticsVisitorID=e,t.S=!0,t.j()},t.ba=!1,t.U=!1,t.Za=function(e){t.audienceManagerLocationHint=e,t.U=!0,t.j()},t.aa=!1,t.T=!1,t.Ya=function(e){t.audienceManagerBlob=e,t.T=!0,t.j()},t.$a=function(e){return t.maxDelay||(t.maxDelay=250),!t.p("_d")||(e&&setTimeout((function(){e()}),t.maxDelay),!1)},t.da=!1,t.I=!1,t.xa=function(){t.I=!0,t.j()},t.isReadyToTrack=function(){var e,n,r,a=!0,o=t.visitor;return t.ea||t.J||(t.ab(t.lb)?t.J=!0:t.ea=!0),!(t.ea&&!t.J)&&(o&&o.isAllowed()&&(t.ca||t.marketingCloudVisitorID||!o.getMarketingCloudVisitorID||(t.ca=!0,t.marketingCloudVisitorID=o.getMarketingCloudVisitorID([t,t.hb]),t.marketingCloudVisitorID&&(t.V=!0)),t.fa||t.visitorOptedOut||!o.isOptedOut||(t.fa=!0,t.visitorOptedOut=o.isOptedOut([t,t.mb]),t.visitorOptedOut!=i&&(t.W=!0)),t.Z||t.analyticsVisitorID||!o.getAnalyticsVisitorID||(t.Z=!0,t.analyticsVisitorID=o.getAnalyticsVisitorID([t,t.Xa]),t.analyticsVisitorID&&(t.S=!0)),t.ba||t.audienceManagerLocationHint||!o.getAudienceManagerLocationHint||(t.ba=!0,t.audienceManagerLocationHint=o.getAudienceManagerLocationHint([t,t.Za]),t.audienceManagerLocationHint&&(t.U=!0)),t.aa||t.audienceManagerBlob||!o.getAudienceManagerBlob||(t.aa=!0,t.audienceManagerBlob=o.getAudienceManagerBlob([t,t.Ya]),t.audienceManagerBlob&&(t.T=!0)),a=t.ca&&!t.V&&!t.marketingCloudVisitorID,o=t.Z&&!t.S&&!t.analyticsVisitorID,e=t.ba&&!t.U&&!t.audienceManagerLocationHint,n=t.aa&&!t.T&&!t.audienceManagerBlob,r=t.fa&&!t.W,a=!(a||o||e||n||r)),t.da||t.I||(t.$a(t.xa)?t.I=!0:t.da=!0),t.da&&!t.I&&(a=!1),a)},t.o=i,t.u=0,t.callbackWhenReadyToTrack=function(e,n,r){var a;(a={}).qb=e,a.pb=n,a.nb=r,t.o==i&&(t.o=[]),t.o.push(a),0==t.u&&(t.u=setInterval(t.j,100))},t.j=function(){var e;if(t.isReadyToTrack()&&(t.kb(),t.o!=i))for(;0<t.o.length;)(e=t.o.shift()).pb.apply(e.qb,e.nb)},t.kb=function(){t.u&&(clearInterval(t.u),t.u=0)},t.fb=function(e){var n,r,a=i,o=i;if(!t.isReadyToTrack()){if(n=[],e!=i)for(r in a={},e)a[r]=e[r];return o={},t.Va(o,!0),n.push(a),n.push(o),t.callbackWhenReadyToTrack(t,t.track,n),!0}return!1},t.xb=function(){var e,n=t.cookieRead("s_fid"),i="",r="";e=8;var a=4;if(!n||0>n.indexOf("-")){for(n=0;16>n;n++)e=Math.floor(Math.random()*e),i+="0123456789ABCDEF".substring(e,e+1),e=Math.floor(Math.random()*a),r+="0123456789ABCDEF".substring(e,e+1),e=a=16;n=i+"-"+r}return t.cookieWrite("s_fid",n,1)||(n=0),n},t.t=t.track=function(e,i){var r,a=new Date,o="s"+Math.floor(a.getTime()/108e5)%10+Math.floor(1e13*Math.random()),c=a.getYear();c="t="+t.escape(a.getDate()+"/"+a.getMonth()+"/"+(1900>c?c+1900:c)+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+" "+a.getDay()+" "+a.getTimezoneOffset()),t.visitor&&t.visitor.getAuthState&&(t.authState=t.visitor.getAuthState()),t.p("_s"),t.fb(e)||(i&&t.R(i),e&&(r={},t.Va(r,0),t.R(e)),t.Db()&&!t.visitorOptedOut&&(t.analyticsVisitorID||t.marketingCloudVisitorID||(t.fid=t.xb()),t.Hb(),t.usePlugins&&t.doPlugins&&t.doPlugins(t),t.account&&(t.abort||(t.trackOffline&&!t.timestamp&&(t.timestamp=Math.floor(a.getTime()/1e3)),a=n.location,t.pageURL||(t.pageURL=a.href?a.href:a),t.referrer||t.Wa||(a=t.Util.getQueryParam("adobe_mc_ref",null,null,!0),t.referrer=a||void 0===a?void 0===a?"":a:s.document.referrer),t.Wa=1,t.referrer=t.vb(t.referrer),t.p("_g")),t.Ab()&&!t.abort&&(t.visitor&&!t.supplementalDataID&&t.visitor.getSupplementalDataID&&(t.supplementalDataID=t.visitor.getSupplementalDataID("AppMeasurement:"+t._in,!t.expectSupplementalData)),t.Bb(),c+=t.zb(),t.Gb(o,c),t.p("_t"),t.referrer=""))),e&&t.R(r,1)),t.abort=t.supplementalDataID=t.timestamp=t.pageURLRest=t.linkObject=t.clickObject=t.linkURL=t.linkName=t.linkType=n.s_objectID=t.pe=t.pev1=t.pev2=t.pev3=t.e=t.lightProfileID=0},t.za=[],t.registerPreTrackCallback=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);"function"==typeof e?t.za.push([e,n]):t.debugTracking&&t.F("DEBUG: Non function type passed to registerPreTrackCallback")},t.cb=function(e){t.wa(t.za,e)},t.ya=[],t.registerPostTrackCallback=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);"function"==typeof e?t.ya.push([e,n]):t.debugTracking&&t.F("DEBUG: Non function type passed to registerPostTrackCallback")},t.bb=function(e){t.wa(t.ya,e)},t.wa=function(e,n){if("object"==typeof e)for(var i=0;i<e.length;i++){var r=e[i][0],a=e[i][1];if(a.unshift(n),"function"==typeof r)try{r.apply(null,a)}catch(e){t.debugTracking&&t.F(e.message)}}},t.tl=t.trackLink=function(e,n,i,r,a){return t.linkObject=e,t.linkType=n,t.linkName=i,a&&(t.l=e,t.A=a),t.track(r)},t.trackLight=function(e,n,i,r){return t.lightProfileID=e,t.lightStoreForSeconds=n,t.lightIncrementBy=i,t.track(r)},t.clearVars=function(){var e,n;for(e=0;e<t.g.length;e++)("prop"==(n=t.g[e]).substring(0,4)||"eVar"==n.substring(0,4)||"hier"==n.substring(0,4)||"list"==n.substring(0,4)||"channel"==n||"events"==n||"eventList"==n||"products"==n||"productList"==n||"purchaseID"==n||"transactionID"==n||"state"==n||"zip"==n||"campaign"==n)&&(t[n]=void 0)},t.tagContainerMarker="",t.Gb=function(e,n){var i,r=t.trackingServer;i="";var a=t.dc,o="sc.",s=t.visitorNamespace;r?t.trackingServerSecure&&t.ssl&&(r=t.trackingServerSecure):(s||(0<=(r=(s=t.account).indexOf(","))&&(s=s.substring(0,r)),s=s.replace(/[^A-Za-z0-9]/g,"")),i||(i="2o7.net"),a=a?(""+a).toLowerCase():"d1","2o7.net"==i&&("d1"==a?a="112":"d2"==a&&(a="122"),o=""),r=s+"."+a+"."+o+i),i=t.ssl?"https://":"http://",a=t.AudienceManagement&&t.AudienceManagement.isReady()||0!=t.usePostbacks,i+=r+"/b/ss/"+t.account+"/"+(t.mobile?"5.":"")+(a?"10":"1")+"/JS-"+t.version+(t.Kb?"T":"")+(t.tagContainerMarker?"-"+t.tagContainerMarker:"")+"/"+e+"?AQB=1&ndh=1&pf=1&"+(a?"callback=s_c_il["+t._in+"].doPostbacks&et=1&":"")+n+"&AQE=1",t.cb(i),t.tb(i),t.ka()},t.Ua=/{(%?)(.*?)(%?)}/,t.Ob=RegExp(t.Ua.source,"g"),t.ub=function(e){if("object"==typeof e.dests)for(var n=0;n<e.dests.length;++n){var i=e.dests[n];if("string"==typeof i.c&&"aa."==i.id.substr(0,3))for(var r=i.c.match(t.Ob),a=0;a<r.length;++a){var o=r[a],s=o.match(t.Ua),c="";"%"==s[1]&&"timezone_offset"==s[2]?c=(new Date).getTimezoneOffset():"%"==s[1]&&"timestampz"==s[2]&&(c=t.yb()),i.c=i.c.replace(o,t.escape(c))}}},t.yb=function(){var e=new Date,n=new Date(6e4*Math.abs(e.getTimezoneOffset()));return t.k(4,e.getFullYear())+"-"+t.k(2,e.getMonth()+1)+"-"+t.k(2,e.getDate())+"T"+t.k(2,e.getHours())+":"+t.k(2,e.getMinutes())+":"+t.k(2,e.getSeconds())+(0<e.getTimezoneOffset()?"-":"+")+t.k(2,n.getUTCHours())+":"+t.k(2,n.getUTCMinutes())},t.k=function(e,t){return(Array(e+1).join(0)+t).slice(-e)},t.ta={},t.doPostbacks=function(e){if("object"==typeof e)if(t.ub(e),"object"==typeof t.AudienceManagement&&"function"==typeof t.AudienceManagement.isReady&&t.AudienceManagement.isReady()&&"function"==typeof t.AudienceManagement.passData)t.AudienceManagement.passData(e);else if("object"==typeof e&&"object"==typeof e.dests)for(var n=0;n<e.dests.length;++n){var i=e.dests[n];"object"==typeof i&&"string"==typeof i.c&&"string"==typeof i.id&&"aa."==i.id.substr(0,3)&&(t.ta[i.id]=new Image,t.ta[i.id].alt="",t.ta[i.id].src=i.c)}},t.tb=function(e){t.i||t.Cb(),t.i.push(e),t.ma=t.C(),t.Sa()},t.Cb=function(){t.i=t.Eb(),t.i||(t.i=[])},t.Eb=function(){var e,i;if(t.ra()){try{(i=n.localStorage.getItem(t.pa()))&&(e=n.JSON.parse(i))}catch(e){}return e}},t.ra=function(){var e=!0;return t.trackOffline&&t.offlineFilename&&n.localStorage&&n.JSON||(e=!1),e},t.Ja=function(){var e=0;return t.i&&(e=t.i.length),t.q&&e++,e},t.ka=function(){if(!t.q||(t.B&&t.B.complete&&t.B.G&&t.B.va(),!t.q))if(t.Ka=i,t.qa)t.ma>t.O&&t.Qa(t.i),t.ua(500);else{var e=t.ob();0<e?t.ua(e):(e=t.Ga())&&(t.q=1,t.Fb(e),t.Jb(e))}},t.ua=function(e){t.Ka||(e||(e=0),t.Ka=setTimeout(t.ka,e))},t.ob=function(){var e;return!t.trackOffline||0>=t.offlineThrottleDelay?0:(e=t.C()-t.Pa,t.offlineThrottleDelay<e?0:t.offlineThrottleDelay-e)},t.Ga=function(){if(0<t.i.length)return t.i.shift()},t.Fb=function(e){if(t.debugTracking){var n,i="AppMeasurement Debug: "+e;for(e=e.split("&"),n=0;n<e.length;n++)i+="\n\t"+t.unescape(e[n]);t.F(i)}},t.gb=function(){return t.marketingCloudVisitorID||t.analyticsVisitorID},t.Y=!1;try{o=JSON.parse('{"x":"y"}')}catch(e){o=null}for(o&&"y"==o.x?(t.Y=!0,t.X=function(e){return JSON.parse(e)}):n.$&&n.$.parseJSON?(t.X=function(e){return n.$.parseJSON(e)},t.Y=!0):t.X=function(){return null},t.Jb=function(e){var r,a,o;if(t.gb()&&2047<e.length&&("undefined"!=typeof XMLHttpRequest&&("withCredentials"in(r=new XMLHttpRequest)?a=1:r=0),r||"undefined"==typeof XDomainRequest||(r=new XDomainRequest,a=2),r&&(t.AudienceManagement&&t.AudienceManagement.isReady()||0!=t.usePostbacks)&&(t.Y?r.Ba=!0:r=0)),!r&&t.Ta&&(e=e.substring(0,2047)),!r&&t.d.createElement&&(0!=t.usePostbacks||t.AudienceManagement&&t.AudienceManagement.isReady())&&(r=t.d.createElement("SCRIPT"))&&"async"in r&&((o=(o=t.d.getElementsByTagName("HEAD"))&&o[0]?o[0]:t.d.body)?(r.type="text/javascript",r.setAttribute("async","async"),a=3):r=0),r||((r=new Image).alt="",r.abort||void 0===n.InstallTrigger||(r.abort=function(){r.src=i})),r.Da=function(){try{r.G&&(clearTimeout(r.G),r.G=0)}catch(e){}},r.onload=r.va=function(){if(t.bb(e),r.Da(),t.sb(),t.ga(),t.q=0,t.ka(),r.Ba){r.Ba=!1;try{t.doPostbacks(t.X(r.responseText))}catch(e){}}},r.onabort=r.onerror=r.Ha=function(){r.Da(),(t.trackOffline||t.qa)&&t.q&&t.i.unshift(t.rb),t.q=0,t.ma>t.O&&t.Qa(t.i),t.ga(),t.ua(500)},r.onreadystatechange=function(){4==r.readyState&&(200==r.status?r.va():r.Ha())},t.Pa=t.C(),1==a||2==a){var s=e.indexOf("?");o=e.substring(0,s),s=(s=e.substring(s+1)).replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),1==a?(r.open("POST",o,!0),r.send(s)):2==a&&(r.open("POST",o),r.send(s))}else if(r.src=e,3==a){if(t.Na)try{o.removeChild(t.Na)}catch(e){}o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),t.Na=t.B}r.G=setTimeout((function(){r.G&&(r.complete?r.va():(t.trackOffline&&r.abort&&r.abort(),r.Ha()))}),5e3),t.rb=e,t.B=n["s_i_"+t.replace(t.account,",","_")]=r,(t.useForcedLinkTracking&&t.K||t.A)&&(t.forcedLinkTrackingTimeout||(t.forcedLinkTrackingTimeout=250),t.ha=setTimeout(t.ga,t.forcedLinkTrackingTimeout))},t.sb=function(){if(t.ra()&&!(t.Oa>t.O))try{n.localStorage.removeItem(t.pa()),t.Oa=t.C()}catch(e){}},t.Qa=function(e){if(t.ra()){t.Sa();try{n.localStorage.setItem(t.pa(),n.JSON.stringify(e)),t.O=t.C()}catch(e){}}},t.Sa=function(){if(t.trackOffline)for((!t.offlineLimit||0>=t.offlineLimit)&&(t.offlineLimit=10);t.i.length>t.offlineLimit;)t.Ga()},t.forceOffline=function(){t.qa=!0},t.forceOnline=function(){t.qa=!1},t.pa=function(){return t.offlineFilename+"-"+t.visitorNamespace+t.account},t.C=function(){return(new Date).getTime()},t.La=function(e){return 0!=(e=e.toLowerCase()).indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")},t.setTagContainer=function(e){var n,i,r;for(t.Kb=e,n=0;n<t._il.length;n++)if((i=t._il[n])&&"s_l"==i._c&&i.tagContainerName==e){if(t.R(i),i.lmq)for(n=0;n<i.lmq.length;n++)r=i.lmq[n],t.loadModule(r.n);if(i.ml)for(r in i.ml)if(t[r])for(n in e=t[r],r=i.ml[r])!Object.prototype[n]&&("function"!=typeof r[n]||0>(""+r[n]).indexOf("s_c_il"))&&(e[n]=r[n]);if(i.mmq)for(n=0;n<i.mmq.length;n++)r=i.mmq[n],t[r.m]&&(e=t[r.m])[r.f]&&"function"==typeof e[r.f]&&(r.a?e[r.f].apply(e,r.a):e[r.f].apply(e));if(i.tq)for(n=0;n<i.tq.length;n++)t.track(i.tq[n]);i.s=t;break}},t.Util={urlEncode:t.escape,urlDecode:t.unescape,cookieRead:t.cookieRead,cookieWrite:t.cookieWrite,getQueryParam:function(e,i,r,a){var o,s="";return i||(i=t.pageURL?t.pageURL:n.location),r=r||"&",e&&i?0>(o=(i=""+i).indexOf("?"))?s:(i=r+i.substring(o+1)+r,a&&(0<=i.indexOf(r+e+r)||0<=i.indexOf(r+e+"="+r))?void 0:(0<=(o=i.indexOf("#"))&&(i=i.substr(0,o)+r),0>(o=i.indexOf(r+e+"="))||(0<=(o=(i=i.substring(o+r.length+e.length+1)).indexOf(r))&&(i=i.substring(0,o)),0<i.length&&(s=t.unescape(i))),s)):s}},t.H="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" "),t.g=t.H.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),t.na="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),t.P=t.na.slice(0),t.Aa="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks registerPreTrackCallback registerPostTrackCallback AudienceManagement".split(" "),r=0;250>=r;r++)76>r&&(t.g.push("prop"+r),t.P.push("prop"+r)),t.g.push("eVar"+r),t.P.push("eVar"+r),6>r&&t.g.push("hier"+r),4>r&&t.g.push("list"+r);r="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID".split(" "),t.g=t.g.concat(r),t.H=t.H.concat(r),t.ssl=0<=n.location.protocol.toLowerCase().indexOf("https"),t.charSet="UTF-8",t.contextData={},t.offlineThrottleDelay=0,t.offlineFilename="AppMeasurement.offline",t.Pa=0,t.ma=0,t.O=0,t.Oa=0,t.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",t.w=n,t.d=n.document;try{if(t.Ta=!1,navigator){var c=navigator.userAgent;("Microsoft Internet Explorer"==navigator.appName||0<=c.indexOf("MSIE ")||0<=c.indexOf("Trident/")&&0<=c.indexOf("Windows NT 6"))&&(t.Ta=!0)}}catch(e){}t.ga=function(){t.ha&&(n.clearTimeout(t.ha),t.ha=i),t.l&&t.K&&t.l.dispatchEvent(t.K),t.A&&("function"==typeof t.A?t.A():t.l&&t.l.href&&(t.d.location=t.l.href)),t.l=t.K=t.A=0},t.Ra=function(){t.b=t.d.body,t.b?(t.v=function(e){var i,r,a,o,s;if(!(t.d&&t.d.getElementById("cppXYctnr")||e&&e["s_fe_"+t._in])){if(t.Ca){if(!t.useForcedLinkTracking)return t.b.removeEventListener("click",t.v,!0),void(t.Ca=t.useForcedLinkTracking=0);t.b.removeEventListener("click",t.v,!1)}else t.useForcedLinkTracking=0;t.clickObject=e.srcElement?e.srcElement:e.target;try{if(!t.clickObject||t.N&&t.N==t.clickObject||!(t.clickObject.tagName||t.clickObject.parentElement||t.clickObject.parentNode))t.clickObject=0;else{var c=t.N=t.clickObject;if(t.la&&(clearTimeout(t.la),t.la=0),t.la=setTimeout((function(){t.N==c&&(t.N=0)}),1e4),a=t.Ja(),t.track(),a<t.Ja()&&t.useForcedLinkTracking&&e.target){for(o=e.target;o&&o!=t.b&&"A"!=o.tagName.toUpperCase()&&"AREA"!=o.tagName.toUpperCase();)o=o.parentNode;if(o&&(s=o.href,t.La(s)||(s=0),r=o.target,e.target.dispatchEvent&&s&&(!r||"_self"==r||"_top"==r||"_parent"==r||n.name&&r==n.name))){try{i=t.d.createEvent("MouseEvents")}catch(e){i=new n.MouseEvent}if(i){try{i.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(e){i=0}i&&(i["s_fe_"+t._in]=i.s_fe=1,e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),t.l=e.target,t.K=i)}}}}}catch(e){t.clickObject=0}}},t.b&&t.b.attachEvent?t.b.attachEvent("onclick",t.v):t.b&&t.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&t.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&n.MouseEvent)&&(t.Ca=1,t.useForcedLinkTracking=1,t.b.addEventListener("click",t.v,!0)),t.b.addEventListener("click",t.v,!1))):setTimeout(t.Ra,30)},t.Ra(),e?t.setAccount(e):t.F("Error, missing Report Suite ID in AppMeasurement initialization"),t.loadModule("ActivityMap")}function s_gi(e){var t,n,i,r,a,o=window.s_c_il,s=e.split(","),c=0;if(o)for(n=0;!c&&n<o.length;){if("s_c"==(t=o[n])._c&&(t.account||t.oun))if(t.account&&t.account==e)c=1;else for(i=t.account?t.account:t.oun,i=t.allAccounts?t.allAccounts:i.split(","),r=0;r<s.length;r++)for(a=0;a<i.length;a++)s[r]==i[a]&&(c=1);n++}return c?t.setAccount&&t.setAccount(e):t=new AppMeasurement(e),t}function s_pgicq(){var e,t,n,i=window,r=i.s_giq;if(r)for(e=0;e<r.length;e++)(n=s_gi((t=r[e]).oun)).setAccount(t.un),n.setTagContainer(t.tagContainerName);i.s_giq=0}AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),vmDtvLib=vmDtvLib||{},"DEV"===vmDtvLib.buildEnvironment&&(__DEVELOPMENT__=!0),vmDtvLib.tracking={typeOf:vmDtvLib.util.typeOf,isLiveApp:vmDtvLib.device.isLiveApp,shallowMerge:vmDtvLib.util.merge,correctToBooleanType:vmDtvLib.lib.correctToBooleanType,specificLoadInit:function(){vmDtvLib.lib.configComponentsCb.tracking=this.processConfig.bind(this)},specificInit:function(e,t){if(vmDtvLib.device){var n=vmDtvLib.device;this.macAddr=n.getMac(),this.language=n.getLanguageCode(),this.stbId=n.getDeviceId(),this.accountId=n.getAccountId(),this.country=n.getCountryCode();var i=n.getDeviceModel();"LEAPFROG"===i&&(i="V6"),this.deviceDetails=n.getDevicePlatform()+":"+i+":"+n.getDeviceManufacturer(),e()}else t("No vmDtvLib.device")},VERSION:"1.0.0",macAddr:null,language:null,stbId:null,accountId:null,country:null,deviceDetails:null,initialised:!1,pendingTracks:[],trackConfig:{},s:null,keepAliveTimer:null,varNumHigh:null,appVersion:null,appName:null,flowName:"",eVarMapping:{chanName:1,progName:2,popupName:6,popupExitAction:7,errorCode:8,errorMessage:9,eventSuccess:12,videoId:13,position:14,startTime:15,shortErrorCode:16,errorCategory:17,flowName:18,flowStepName:19,flowExitReason:24,exitDestination:32},eventMapping:{keepAlive:2,popupLoad:4,exitApp:5,close:6,back:7,popupClose:8,login:9,watch:10,purchase:11,error:12,purchaseAttempt:13,loginAttempt:14,videoStart:15,videoEnd:16,loggedIn:17,flowStart:18,flowComplete:19,flowFail:40},defaultTestAccountNamesForCountry:{gb:"upcvmstbappdev"},defaultTestAccountName:"upchzn3app-dev",defaultAccountNamesForCountry:{gb:"upcvmstbapp"},defaultAccountName:"upchzn3app",trackingName:"NOT-SET",trackIds:!0,config:{accountName:null,accountNameTest:null,namespace:"upc",server:"upc.sc.omtrdc.net",serverSecure:"upc.sc.omtrdc.net",keepAliveMs:25e3,currencyCode:"EUR",launchRef:"",test:!1,trackToAdobe:!0,trackKeepAlives:!0,trackErrors:!0,trackPageLoads:!0,trackAppExits:!0,trackPopups:!1,trackVideoEvents:!0,trackLoginEvents:!1,trackPurchaseEvents:!1,trackOtherEvents:!1,trackIds:!0,maxPending:10,pendingDelayMs:500},processConfig:function(e){e.test=this.correctToBooleanType(e.test,!1),e.trackToAdobe=this.correctToBooleanType(e.trackToAdobe,!0),e.trackKeepAlives=this.correctToBooleanType(e.trackKeepAlives,!0),e.trackErrors=this.correctToBooleanType(e.trackErrors,!0),e.trackPageLoads=this.correctToBooleanType(e.trackPageLoads,!0),e.trackAppExits=this.correctToBooleanType(e.trackAppExits,!0),e.trackPopups=this.correctToBooleanType(e.trackPopups,!1),e.trackVideoEvents=this.correctToBooleanType(e.trackVideoEvents,!0),e.trackLoginEvents=this.correctToBooleanType(e.trackLoginEvents,!1),e.trackPurchaseEvents=this.correctToBooleanType(e.trackPurchaseEvents,!1),e.trackOtherEvents=this.correctToBooleanType(e.trackOtherEvents,!1),e.trackIds=this.correctToBooleanType(e.trackIds,!0),this.config=this.shallowMerge(this.config,e),this.trackIds=this.config.trackIds},enableTrackIds:function(){return this.trackIds=!0,this},undoTrackIds:function(){return this.trackIds=this.config.trackIds,this},initApp:function(e){this.config.trackToAdobe?(this.trackConfig=e,this.specificInit(this.initApp2.bind(this),(function(e){console.error("tracking : initApp, specificInit error",e)}))):console.warn("Tracking to Adobe is switched off")},initApp2:function(){var e=this,t=e.config.test||!e.isLiveApp();console.warn("All tracking is going to the "+(t?"test":"live")+" environment"),e.varNumHigh=e.trackConfig.maxVar,e.appName=e.trackConfig.appName,e.appVersion=e.trackConfig.appVersion,e.s=s_gi(t?e.config.accountNameTest||e.defaultTestAccountNamesForCountry[e.country]||e.defaultTestAccountName:e.config.accountName||e.defaultAccountNamesForCountry[e.country]||e.defaultAccountName),e.s.visitorNamespace=e.config.namespace,e.s.trackingServer=e.config.server,e.s.trackingServerSecure=e.config.serverSecure,e.s.charSet="UTF-8",e.s.currencyCode=e.config.currencyCode,e.s.trackDownloadLinks=e.trackConfig.trackDownloadLinks||!1,e.s.trackExternalLinks=e.trackConfig.trackExternalLinks||!1,e.s.trackInlineStats=e.trackConfig.trackInlineStats||!1,e.s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx,mobileconfig,bin",e.s.linkInternalFilters="javascript:,"+document.location.hostname,e.s.linkLeaveQueryString=!1,e.s.linkTrackVars="None",e.s.linkTrackEvents="None",e.s.usePlugins=!1,e.s.channel=e.trackConfig.appSection?e.trackConfig.appSection:e.trackConfig.appName,e.s.prop1=e.trackConfig.launchPoint?e.trackConfig.launchPoint:"",e.config.launchRef&&(e.s.prop1+=(e.trackConfig.launchPoint?" / ":"")+e.config.launchRef),e.s.eVar1="",e.s.eVar2=e.s.prop2="";var n=e.trackConfig.landingPageName||"launch";e.s.eVar3=e.s.pageName=n.toLowerCase(),e.setCommonVars(),e.s.prop64=adobeCodeVersion,e.trackConfig.extraValues&&e.addVars(e.trackConfig.extraValues),e.s.events="event1",e.s.t(),e.config.trackKeepAlives&&(e.keepAliveTimer=setInterval((function(){e.sendEventTrack("keepAlive")}),e.config.keepAliveMs)),e.initialised=!0;var i=setInterval((function(){if(0===e.pendingTracks.length)e.pendingTracks=null,delete e.pendingTracks,clearInterval(i);else{var t=e.pendingTracks.shift();e[t.method].apply(e,t.args)}}),e.config.pendingDelayMs)},exitApp:function(e,t,n,i){if(this.keepAliveTimer&&clearInterval(this.keepAliveTimer),this.keepAliveTimer=null,this.config.trackToAdobe&&this.config.trackAppExits)if(this.initialised){var r={prop6:e};i&&(r.exitDestination=i),this.sendEventTrack("exitApp",r,t,n)}else this.addPendingTracks("exitApp",arguments)},pageLoad:function(e,t,n,i){this.config.trackToAdobe&&this.config.trackPageLoads&&(this.initialised?(this.clearAppVars(1,2),this.clearAppVars(6,29),this.varNumHigh&&this.clearAppVars(30,this.varNumHigh),this.s.eVar3=this.s.pageName=e.toLowerCase(),this.setCommonVars(),this.addVars(t),this.addVars(n),this.s.linkTrackVars="None",this.s.linkTrackEvents="None",this.s.events="event3",this.addEvents(i),this.s.t()):this.addPendingTracks("pageLoad",arguments))},showPopup:function(e,t,n,i){this.config.trackToAdobe&&this.config.trackPopups&&(this.initialised?this.sendEventTrack("popupLoad",this.shallowMerge({popupName:e},t),n,i):this.addPendingTracks("showPopup",arguments))},closePopup:function(e,t,n,i,r){this.config.trackToAdobe&&this.config.trackPopups&&(this.initialised?this.sendEventTrack("popupClose",this.shallowMerge({popupName:e,popupExitAction:t},n),i,r):this.addPendingTracks("closePopup",arguments))},trackEvent:function(e,t,n,i){if(this.config.trackToAdobe)if(this.initialised){switch(e){case"purchase":case"purchaseAttempt":case"purchased":if(!this.config.trackPurchaseEvents)return;break;case"login":case"loginAttempt":case"loggedIn":if(!this.config.trackLoginEvents)return;break;case"videoStart":case"videoEnd":if(!this.config.trackVideoEvents)return;break;default:if(!this.config.trackOtherEvents)return}this.sendEventTrack(e,t,n,i)}else this.addPendingTracks("trackEvent",arguments)},sendEventTrack:function(e,t,n,i){this.s.linkTrackVars="events,eVar4,prop3,prop7,prop8",this.s.events="purchased"===e?"purchase":this.eventMapping[e]?"event"+this.eventMapping[e]:e,this.addVars(t),this.addEvents(i),this.s.linkTrackEvents=this.s.events,this.addVars(n),this.setCommonVars(),this.s.tl(!0,"o","Event "+e),this.s.products=""},trackError:function(e,t,n,i,r){if(this.config.trackToAdobe&&this.config.trackErrors)if(this.initialised){var a={errorCode:e,errorMessage:t||"",errorCategory:n||"displayed",shortErrorCode:e.split("/")[0]};this.sendEventTrack("error",a,i,r)}else this.addPendingTracks("trackError",arguments)},createFlowStartObj:function(e,t){this.flowName=e;var n=this.createFlowObj(t);return n.events=["flowStart"],n},createFlowObj:function(e){return this.flowName?{variables:{flowName:this.flowName,flowStepName:e?this.flowName+":"+e:""}}:{}},createFlowEndObj:function(e,t,n){if(!this.flowName)return{};var i="success"===e||"cancel"===e?"flowComplete":"flowFail",r=this.createFlowObj(t);return r.events=[i],r.variables.flowExitReason=n||"",this.flowName="",r},addPendingTracks:function(e,t){this.pendingTracks&&(this.pendingTracks.length>=this.config.maxPending?this.pendingTracks=[]:this.pendingTracks.push({method:e,args:t}))},setCommonVars:function(){this.s.prop3=this.appName,this.s.prop4=this.country,this.s.prop5=this.language,this.s.prop7=this.appVersion,this.s.prop8=(new Date).toISOString(),this.s.eVar30=this.deviceDetails,this.trackIds?(this.s.eVar4=this.stbId,this.s.eVar5=this.accountId,this.s.eVar31=this.macAddr):(this.s.eVar4="",this.s.eVar5="",this.s.eVar31="")},addEvents:function(e){if("array"===this.typeOf(e))for(var t=0;t<e.length;t++)this.s.events+=","+(this.eventMapping[e[t]]?"event"+this.eventMapping[e[t]]:e[t])},addVars:function(e){var t;if("object"===this.typeOf(e))for(var n in e)t=this.eVarMapping[n]?"eVar"+this.eVarMapping[n]:n,this.s[t]=e[n],"None"===this.s.linkTrackVars?this.s.linkTrackVars=t:this.s.linkTrackVars+=","+t},clearAppVars:function(e,t){for(var n=e;n<=t;n++)this.s["eVar"+n]="",this.s["prop"+n]=""},suicide:function(){}},vmDtvLib.tracking.specificLoadInit(),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{},n=t.error;t.fileLoader={loadFile:function(e,i,r,a,o,s,c,l){null!==e&&void 0!==e&&""!==e?new function(e,i,r,a,o,s,c,l){var u=this;if(this.startTime=(new Date).getTime(),this.aborted=!1,this.xobj=new XMLHttpRequest,this.timerId=setTimeout((function(){var t=!u.aborted;u.aborted=!0,u.xobj.abort(),t&&n.logCreateCall(3,"Request timed out: "+e,void 0,r)}),1e3*(o||240)),null!==a&&void 0!==a){var d=""+("boolean"==typeof a?(new Date).getTime():a);e=new t.Url(e).setQueryParameter("_",d).getUrl()}if(this.xobj.open(l||(s?"PUT":"GET"),e,!0),c)for(var p in c)this.xobj.setRequestHeader(p,c[p]);this.xobj.onreadystatechange=function(){if(!u.aborted&&4===u.xobj.readyState){if(clearTimeout(u.timerId),u.aborted=!0,200!==u.xobj.status){var t=((new Date).getTime()-u.startTime)/1e3,a=e.substr(0,e.lastIndexOf("?"));return void n.logCreateCall(2,"After "+t+"s. Http status "+u.xobj.status+"("+u.xobj.statusText+"), "+u.xobj.responseText+", failed to load "+a,void 0,(function(e){r(e,u.xobj),u.xobj.onreadystatechange=null,u.xobj=null}),u.xobj.status)}i&&(i(u.xobj.responseText),u.xobj.onreadystatechange=null,u.xobj=null)}},this.xobj.send(s)}(e,(function(e){i&&i(e)}),r,a,o,s,c,l):setTimeout(n.logCreateCall,0,1,"No url provided to loadFile call",log,r)}},t.fileLoader}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{},n=t.error,i=0;t.jsonLoader={loadJson:function(e,i,r,a,o,s,c,l){t.fileLoader.loadFile(e,(function(e){var t;try{t=JSON.parse(e)}catch(t){return void n.logCreateCall(99,t.message,void 0,(function(t){r(t,e)}))}i&&i(t)}),r,a,o,s,c,l)},loadJsonp:function(r,a,o,s,c,l,u){function d(){h&&clearTimeout(h),f.removeChild(p),e[c]=function(){},e.onerror=g,p.onerror=null}var p,h,f,v,g;r?(i++,c||(l=l||"callback",c="vdlJsonp"+i),v=new t.Url(r).makeAbsolute(location.href),(s||l)&&(s&&v.setQueryParameter("_"+(new Date).getTime(),""),l&&v.setQueryParameter(l,c)),r=v.getUrl(),e[c]=function(e){d(),e?a&&a(e):n.logCreateCall(2,"No Data, Failed to load "+r,void 0,o)},g=e.onerror,e.onerror=function(e,t,i){t&&t!==r||(d(),n.logCreateCall(99,e+" In file: "+r,void 0,o))},(p=document.createElement("script")).onerror=function(e){d();var t=r.substr(0,r.lastIndexOf("?"));n.logCreateCall(2,"Failed to load: "+t,void 0,o)},p.src=r,p.id="vdlJsonp"+i,(f=document.getElementsByTagName("head")[0]||document.documentElement).appendChild(p),h=setTimeout((function(){d(),n.logCreateCall(3,"Request timed out: "+r,void 0,o)}),1e3*(u||240))):setTimeout(n.logCreateCall,0,1,"No url provided to loadJsonp call",log,o)}},t.jsonLoader}(this),function(e){"use strict";var t,n,i,r,a,o,s,c,l,u,d,p,h,f,v,g,m,C,b,T=e.vmDtvLib=e.vmDtvLib||{},E=6e4,y=2e4,P=60,k="x-tivo:classicui:livetv",N="OK",O="Tuner Conflict",I="Recordings are set to use all your Virgin TV box tuners.<p>If you want to continue to use this app you&#8217;ll need to manage your recordings.<p>To exit app press OK",S="Channel Unavailable",L="Unable to tune to the channel. Please try again later.",A=800,_=6e4,D=6e4,R=!0,w=function(){};document.addEventListener("keydown",(function(e){b&&C&&(C.onKey(e),e.stopImmediatePropagation())}),!0);var M=function(e){if(!t||e&&e!==t)if(e&&"STB"===T.device.getDeviceType())t&&x(),t=e;else{if(!oipfObjectFactory.isObjectSupported("video/broadcast"))throw new T.VmError(n.CM_NO_SUPPORT,"video/broadcast object not supported");t=oipfObjectFactory.createVideoBroadcastObject()}return t},x=function(){B(),p&&(clearTimeout(p),p=null,s=!1),m&&(clearTimeout(m),m=null),t&&(X(),t.release(),t.removeEventListener("SelectedComponentChanged",$)),n.removeListenerTunerLoss()},U=function(e){try{if(a)return void V(!0,new T.VmError(n.CM_CALL_IN_PROGRESS,"existing useChanList call still in progress"));a=e,i?V(!0):(t||M(),r=t.getChannelConfig(),i=r.channelList,!R||i.length>0?V(!0):o=setTimeout((function(){V(!1,new T.VmError(n.CM_NO_CHANLIST,"no channel list avaialable"))}),_),r.addEventListener("ChannelListUpdate",F))}catch(e){V(!0,new T.VmError(n.CM_UNEXP,e.name+", "+e.message,1))}};function V(e,t){try{if(o&&(clearTimeout(o),o=null),a){if(e)setTimeout(a,0);else try{a(t)}catch(e){}a=null,R=!1}}catch(e){a&&a(new T.VmError(n.CM_UNEXP,e.name+", "+e.message,2))}}function F(){i=r.channelList,V()}var B=function(){o&&(clearTimeout(o),o=null),r&&r.removeEventListener("ChannelListUpdate",F),i=r=null},j=function(e){try{void 0!==e.error?J(l,t.currentChannel,T.error.logAndCreate(n.CM_FAIL_TUNE,"failed to tune:"+e.error,void 0,e.error)):(e.state===n.PS_PRESENTING&&q(),H())}catch(e){J(l,null,new T.VmError(n.CM_UNEXP,e.name+", "+e.message,4))}},H=function(){K()&&J(l,t.currentChannel)},K=function(){var e=!1,i=t.currentChannel;if(i&&(!u||i.networkServiceId===u)){var r=t.playState,a=g===n.AV_AS_IS||null!=ne(t.COMPONENT_TYPE_AUDIO,v,g,!0);e=r===n.PS_PRESENTING&&a}return e},q=function(){var e;d||g===n.AV_AS_IS||ne(t.COMPONENT_TYPE_AUDIO,v,g,!0)||(e=ne(t.COMPONENT_TYPE_AUDIO,v,g),t.addEventListener("SelectedComponentChanged",Q),e&&(t.selectComponent(e),d=!0))},G=function(e){try{e.channel&&H()}catch(e){J(l,null,new T.VmError(n.CM_UNEXP,e.name+", "+e.message,5))}},W=function(e){try{var t=e.channel;t&&t&&t.networkServiceId,J(l,t,new T.VmError(n.CM_FAIL_TUNE,"fail tune for: "+l+" error: "+e.errorState,e.errorState))}catch(e){J(l,null,new T.VmError(n.CM_UNEXP,e.name+", "+e.message,6))}};function Q(e){try{e.componentType===t.COMPONENT_TYPE_AUDIO&&(q(),H())}catch(e){J(l,null,new T.VmError(n.CM_UNEXP,e.name+", "+e.message,7))}}function Y(){K()?J(l,t.currentChannel):J(l,null,new T.VmError(n.CM_FAIL_TUNE,"timedout waiting for channel to tune","TO"))}function X(){t&&(t.removeEventListener("PlayStateChange",j),t.removeEventListener("ChannelChangeError",W),t.removeEventListener("ChannelChangeSucceeded",G),t.removeEventListener("SelectedComponentChanged",Q))}function J(e,t,n){var i=!1;if(n&&p&&clearTimeout(p),p=null,d=!1,X(),s?(s=!1,i=!0):n&&(i=!0),c&&i){var r=c;c=null;try{r(e,t,n)}catch(e){}}}var z=function(e,r,a,o){var h,f,m=function(){try{var e=t.currentChannel;e&&t.playState===n.PS_PRESENTING?J(l,e):(null==v&&null==g&&(g=n.AV_AS_IS),p=setTimeout(Y,E),t.addEventListener("PlayStateChange",j),t.bindToCurrentChannel())}catch(e){J(l,null,new T.VmError(n.CM_UNEXP,e.name+", "+e.message,8))}},C=function(e){try{var r;if(e)return void J(l,null,e);(r=null!=u?i.getChannelByNetworkServiceId(u):i.getChannelByName(h))?!0!==r.received?J(l,null,new T.VmError(n.CM_NOT_SUBSCRIBED,"not subscribed to channel: "+r.name+", "+l,l.chanVsid||l.chanName)):(p=setTimeout(Y,E),u=r.networkServiceId,t.addEventListener("ChannelChangeSucceeded",G),t.addEventListener("ChannelChangeError",W),t.addEventListener("PlayStateChange",j),t.setChannel(r)):J(l,null,new T.VmError(n.CM_NO_CHAN,"no channel for : "+l,l.chanVsid||l.chanName))}catch(e){J(l,null,new T.VmError(n.CM_UNEXP,e.name+", "+e.message,9))}};try{if(s)return void(r&&r(e,null,new T.VmError(n.CM_TUNE_IN_PROGRESS,"already tuning")));c=r,t||M(),u=null,d=!1,s=!0,l=e,v=a,"hasNoAudio"===(g=o)&&(g=n.AV_AS_IS),f=t.currentChannel,null==l?m():(l.chanVsid?u=l.chanVsid:h=l.chanName,f&&(null!=u&&f.networkServiceId===u||h&&f.name===h)?m():i?C():U(C)),f=null}catch(t){J(e,null,new T.VmError(n.CM_UNEXP,t.name+", "+t.message,10))}};function $(e){e.componentType===f&&ne(f,v,g,!0)&&ee(h)}function Z(){ee(h,new T.VmError(n.CM_FAIL_COMPONENT,"timedout waiting for onSelectedComponentChanged event"))}function ee(e,n){if(n&&m&&clearTimeout(m),m=null,t.removeEventListener("SelectedComponentChanged",$),h===e&&(h=null),e)try{e(n)}catch(e){}}var te=function(e,i,r,a){try{var o;if(m&&ee(h,new T.VmError(n.CM_SELECT_CANCELLED,f+":"+v+":"+g+": request for new component made")),h=a,!(o=ne(e,i,r)))return void ee(a,new T.VmError(n.CM_NO_COMPONENT,"No component "+r+"="+i,i));a&&(m=setTimeout(Z,D),t.addEventListener("SelectedComponentChanged",$),f=e,v=i,g=r),t.selectComponent(o)}catch(e){ee(a,new T.VmError(n.CM_UNEXP,e.name+", "+e.message,11))}},ne=function(e,n,i,r){e===t.COMPONENT_TYPE_AUDIO&&(i||(i="language"),null==n&&(n="eng"));var a,o=r?t.getCurrentActiveComponents(e):t.getComponents(e);if(r&&"index"===i){i="pid";var s=t.getComponents(e);if(null==(n=s&&s[n]?s[n].pid:null))return null}for(n=String(n),a=0;a<o.length;a++)if(n===String("index"===i?a:o[a][i]))return re(o[a]),o.item(a);return null},ie=function(){x(),e.close()},re=function(e){};n=T.chanMan={CM_NO_SUPPORT:1,CM_NO_CHANLIST:2,CM_CALL_IN_PROGRESS:3,CM_UNEXP:4,CM_FAIL_TUNE:5,CM_NO_CHAN:6,CM_TUNE_IN_PROGRESS:7,CM_FAIL_COMPONENT:8,CM_SELECT_CANCELLED:9,CM_NO_COMPONENT:10,PS_UNREALIZED:0,PS_CONNECTING:1,PS_PRESENTING:2,PS_STOPPED:3,TE_CONFLICT:0,TE_RESOLUTION:1,TT_FOREGROUND:2,TT_BACKGROUND:1,AV_AS_IS:"LEAVE_AS_IS",playStateTxt:["UNREALIZED","CONNECTING","PRESENTING","STOPPED"],tunerEventTypeTxt:["CONFLICT","RESOLUTION"],tunerIdTypeTxt:[null,"BACKGROUND","FOREGROUND"],tunerTaskTypeTxt:[null,"BUFFERING","CHANGE_CHANNEL","RECORDING","RESERVED","SCHEDULED_RECORDING"],init:M,release:x,useChanList:U,stopUseChanList:B,getCurrentChannel:function(e,i){t||M();var r=n.videoBroadcast.currentChannel;r.networkServiceId?e(r):n.useChanList((function(t){if(t)T.error.logCreateCall(n.CM_NO_CHANLIST,"no channel list avaialable",console,i);else{var r=n.channelList.getChannelByName(r.name);null!=r?e(r):T.error.logCreateCall(n.CM_NO_CHAN,"No channel found with name "+r.name,console,i,r.name)}}))},tuneToChannel:z,selectAudioComponent:function(e,n,i){return n||(n="language"),null==e&&(e="eng"),te(t.COMPONENT_TYPE_AUDIO,e,n,i)},getAudioComponent:function(e,n,i){return ne(t.COMPONENT_TYPE_AUDIO,e,n,i)},tuneAndExitOnTunerLoss:function(e,i,r,a,o){var s,c,l=function(){try{var e=!1;b&&clearTimeout(b),b=null,r&&(e=c?r(new T.VmError(n.CM_UNEXP,c.name+", "+c.message,12)):r()),e||ie()}catch(e){ie()}},u=function(e){try{C||(t.stop(),t.release(),b=setTimeout(l,1e3*P),(C=new T.OptionPopup).init({id:"vdl_CmExitPopup",width:A,title:e?S:O,body:e?L+T.error.trackAndGenerateHtml(e,"CM1"):I,buttons:[{text:N,id:"OK"}]}).centre().addListener("CANCEL",l).addListener("OK",l).show())}catch(e){c=e,l()}};b||C||(s=e,i||(i=w),r||(r=w),t||M(),T.chanMan.setListenerTunerLoss(u),z(e,(function(e,t,r){try{r?u(r):(t&&(s=t.networkServiceId,Number(s)<=0&&t.name&&(s=t.name)),i&&i(e,t))}catch(e){c=e,u(new T.VmError(n.CM_UNEXP,"tuneCb exception, "+c.name+", "+c.message,13))}}),a,o))},exitAppNow:ie,isRequestedChannel:function(e){return null!=requestedChanId&&(t=requestedChanId,/^[0-9]+$/.test(t)&&Number(requestedChanId)==e.networkServiceId||String(requestedChanId)===e.name);var t},printChannel:function(e){},printComponent:re,printProgramme:function(e){},printParentalRating:function(e){},VERSION:"1.6.1"},Object.defineProperty(n,"channelConfig",{get:function(){return r}}),Object.defineProperty(n,"channelList",{get:function(){return i}}),Object.defineProperty(n,"videoBroadcast",{get:function(){return t}}),T.lib.configComponentsCb.chMan=function(e){D=e.waitComponentMs||D,_=e.waitChanlistMs||_,E=e.waitTuneMs||E,y=e.waitExitTuneMs||y,P=e.waitExitS||P,k=e.tvUri||k,N=e.exitButText||N,O=e.exitTitle||O,I=e.exitText||I,A=e.exitWidthPx||A,S=e.exitErrorTitle||S,L=e.exitErrorText||L}}(this),function(e){var t,n=vmDtvLib.chanMan;function i(e){try{if(e.tunerEventType===n.TE_CONFLICT&&e.tunerConflictEvent)for(var i=e.tunerConflictEvent,r=0;r<i.defaultCancelledTunerTasks.length;r++){var a=i.tunerTasks[i.defaultCancelledTunerTasks[r]];a&&a.channel&&n.isRequestedChannel(a.channel)&&t()}}catch(e){t(new vmDtvLib.VmError(n.CM_UNEXP,e.name+", "+e.message,14))}}n.setListenerTunerLoss=function(e){t&&n.removeListenerTunerLoss(),t=e,n.videoBroadcast.addEventListener("TunerConflict",i)},n.removeListenerTunerLoss=function(){t=null,n.videoBroadcast&&n.videoBroadcast.removeEventListener("TunerConflict",i)}}(),function(e){"use strict";var t,n=e.vmDtvLib=e.vmDtvLib||{},i=n.chanMan,r=n.util.typeOf,a="x-tivo:classicui:livetv",o="x-tivo:classicui:watchvod";n.lib.configComponentsCb.navigate=function(e){a=e.tvUri||a,o=e.watchVodUri||o};var s=function(e,r,s,c){var l=function(e){var l,u;r?(l=o,u='{"channelNumber":"'+e+'","assetTitle":"'+(r.contentTitle?r.contentTitle:"")+'","description":"'+(r.description?r.description:"")+(r.duration?'","duration":"'+r.duration:"")+'","ratingText":"'+(r.rating&&r.rating.value?r.rating.value:"")+'"}'):(l=a,u='{"initialChannel":[{"channelNumber":["'+e+'"],"type":["channelIdentifier"],"sourceType":["cable"]}]}'),i.release(),c||(c=!1),clearTimeout(t),t=setTimeout((function(){n.error.logCreateCall(2,"Exit to broadcast failed for chan number "+e,void 0,s,e)}),2e4),n.tivoClient.getAction().uiNavigate(l,u,c)};if(e&&null!==e.chanNum&&void 0!==e.chanNum)l(e.chanNum);else{if(i.videoBroadcastObject||i.init(),null==e){var u;if(i.videoBroadcastObject.currentChannel&&(u=i.videoBroadcast.currentChannel.networkServiceId),!u)return void n.error.logCreateCall(3,"no current channel",void 0,s);e={chanVsid:u}}i.useChanList((function(t){t?n.error.logCreateCall(6,t.message,void 0,s,t.printable,t):function(e){var t,r=i.channelList,a=e.chanVsid?r.getChannelByNetworkServiceId(Number(e.chanVsid)):r.getChannelByName(e.chanName);a&&(t=a.majorChannel,/^[0-9]+$/.test(t))?l(a.majorChannel):n.error.logCreateCall(1,"channel not found in channel list: "+(e.chanVsid?e.chanVsid:e.chanName),void 0,s,e.chanVsid?e.chanVsid:e.chanName)}(e)}))}};n.nav={exitToTv:function(e,t,n){s(e,null,t,n)},exitToEvent:function(e,t,n,i){s(e,t,n,i)},exitToApp:function(e,i,a,o){function s(){var e="object"!==r(l)?"{}":JSON.stringify(l);clearTimeout(t),t=setTimeout((function(){n.error.logCreateCall(6,"Exit to app failed: "+c,void 0,i)}),2e4),n.tivoClient.getAction().uiNavigate(c,e,a)}var c,l;if(e&&e.appUrl)if(c=e.appUrl,l=e.appParams,a&&!o&&0===c.indexOf("x-tivo:web:")){var u,d,p=new n.Url,h="LEAPFROG"===n.device.getDeviceModel();0===c.indexOf("x-tivo:web:sandbox_app:")?(u="app",p.setUrl(c.replace("x-tivo:web:sandbox_app:",""))):0===c.indexOf("x-tivo:web:sandbox_web:")?(u="web",p.setUrl(c.replace("x-tivo:web:sandbox_web:",""))):(u="http",p.setUrl(c.replace("x-tivo:web:",""))),h&&(d=n.tivoClient.getDevice().getCompartment()),h&&u!==d||void 0!==p.getQueryParameter("tivo_browser_args")||"object"===r(l)&&void 0!==l.tivo_browser_args?s():(l&&p.setQueryParameters(l,!0),location.href=p.getUrl(!0))}else s();else n.error.logCreateCall(4,"No appUrl specified"+e.appUrl,void 0,i)},exitToVodCategory:function(e,t,i){e&&(e.vodPath||e.vodCatId)?n.traxis.linkToCategoryByPath(e.vodPath?e.vodPath:e.vodCatId,t,i):n.error.logCreateCall(5,"vodPath or vodCatId must be provided",void 0,t)},exitPlayVodAsset:function(e,t,i){e&&(e.vodAssetId||e.vodCatId)?n.traxis.playTitleByCrid(e.vodAssetId?e.vodAssetId:e.vodCatId,t,i):n.error.logCreateCall(7,"vodAssetId or vodCrid must be provided",void 0,t)},exitToVodAssetOrCategory:function(e,t,i,r){t&&(t.vodPath||t.vodCatId)&&e&&(e.vodAssetId||e.vodCatId)?n.traxis.playTitleByCridOrLinkToCategoryByPath(e.vodAssetId?e.vodAssetId:e.vodCatId,t.vodPath?t.vodPath:t.vodCatId,i,r):n.error.logCreateCall(8,"vodPath or vodCatId and also vodAssetId or vodCrid must be provided",void 0,i)},VERSION:"1.0.0"}}(this),function(){"use strict";var e=window.vmDtvLib=window.vmDtvLib||{};e.vodUtil={isPinRequired:function(e,t){var n,i;switch(e=e.toUpperCase()){case"U":case"UC":case"PG":return!1;case"12":case"12A":(i=new Date(t.getTime())).setHours(20,0,0,0);break;case"15":case"G":(i=new Date(t.getTime())).setHours(21,0,0,0);break;case"ADULT":return!0;default:(i=new Date(t.getTime())).setHours(22,0,0,0)}return(n=new Date(t.getTime())).setHours(5,30,0,0),t>n||t<i},confirmPurchase:function(t,n,i,r){var a="";i&&(a=' for <span class="vdl_PpnOrangeOnly">'+e.dateTime.toDaysHoursMinutes(i*e.dateTime.millisInMinute)+"</span>");var o=new e.OptionPopup,s={id:"popup",title:"Confirm Purchase",body:'Are you sure you want to book <span class="vdl_PpnOrangeOnly">'+n+"</span>"+a+(r?' for <span class="vdl_PpnOrangeOnly">\xa3'+r+"</span>":"")+"?",buttons:[{text:"Yes, I'm sure",id:"CONTINUE"},{text:"Nevermind, I don't want to book this event",id:"CANCEL"}]},c=function(e){document.removeEventListener("keydown",o.onKey,!1),t&&t({result:e}),o.deletePopup(),o=null};o.init(s).centre().addListener("CONTINUE",(function(){c(!0)})).addListener("CANCEL",(function(){c(!1)})).show(),document.addEventListener("keydown",o.onKey,!1)},vodPin:function(t,n,i,r){var a="";i&&(a=' for <span class="vdl_PpnOrangeOnly">'+e.dateTime.toDaysHoursMinutes(i*e.dateTime.millisInMinute)+"</span>");var o=new e.PinPrompt;o.init((function(e){document.removeEventListener("keydown",o.onKey),o=null,t(e)}),{instructionEnter:'Enter your PIN to book <span class="vdl_PpnOrangeOnly">'+n+"</span>"+a+(r?' for <span class="vdl_PpnOrangeOnly">\xa3'+r+"</span>":"")+"."}),document.addEventListener("keydown",o.onKey,!1)}}}(),function(e){"use strict";var t,n=e.vmDtvLib=e.vmDtvLib||{},i=n.device.getMac();"DEV"===n.buildEnvironment&&""===i&&(i="3C:62:00:00:08:CD");var r=n.traxisSpoofData,a=201,o=202,s="https://adrenalin.anywhere.msp.dtv.virginmedia.com:8443/traxis/web?Output=json",c='<?xml version="1.0" encoding="UTF-8"?><Request xmlns="urn:eventis:traxisweb:1.0"><ResourcesQuery resourceType="Category"><ResourceIds><ResourceId>{CRID}</ResourceId></ResourceIds><Options><Option type="Props">Name,ChildCategoryCount,TitleCount,isAdult</Option></Options></ResourcesQuery></Request>',l=n.string.supplant('<?xml version="1.0" encoding="UTF-8"?><Request xmlns="urn:eventis:traxisweb:1.0"><Identity><CpeId>{CPEID}</CpeId></Identity><RelationQuery resourceType="Category" relationName="Titles" resourceId="{CRID}"><Options><Option type="Props">Name,MediumSynopsis,Ratings,Duration,ContentProviderId,ProductionDate,Ordinal,SortName</Option><Option type="Sort">SortName</Option><Option type="Filter">Contents.resultCount&gt;0</Option><Option type="paging">{OFFSET},{LIMIT}</Option></Options><SubQueries><SubQuery relationName="Contents"><Options><Option type="Props">EntitlementState,IsHD,Is3D</Option><Option type="Filter">Products.resultCount&gt;0</Option></Options><SubQueries><SubQuery relationName="Products"><Options><Option type="Filter">RelationAvailabilityStart&lt;now()&amp;&amp;RelationAvailabilityEnd&gt;now()</Option></Options></SubQuery></SubQueries></SubQuery></SubQueries></RelationQuery></Request>',{CPEID:i}),u='<?xml version="1.0" encoding="UTF-8"?><Request xmlns="urn:eventis:traxisweb:1.0"><RelationQuery resourceType="Category" relationName="ChildCategories" resourceId="{CRID}"><Options><Option type="Props">Name,ChildCategoryCount,TitleCount,isAdult,ClientRenderType</Option><Option type="Sort">Ordinal,Name</Option><Option type="paging">{OFFSET},{LIMIT}</Option></Options></RelationQuery></Request>',d=n.string.supplant('<?xml version="1.0" encoding="UTF-8"?><Request xmlns="urn:eventis:traxisweb:1.0"><Identity><CpeId>{CPEID}</CpeId></Identity><ResourcesQuery resourceType="Title"><ResourceIds><ResourceId>{CRID}</ResourceId></ResourceIds><Options><Option type="Props">Name,MediumSynopsis,Ratings,Duration,ContentProviderId,ProductionDate</Option></Options><SubQueries><SubQuery relationName="Contents"><Options><Option type="Props">EntitlementState,IsHD,is3D</Option></Options><SubQueries><SubQuery relationName="Products"></SubQuery></SubQueries></SubQuery></SubQueries></ResourcesQuery></Request>',{CPEID:i}),p=!0;function h(e,i,c,d,h){function f(e,t,i){n.jsonLoader.loadJson(s,i,h,null,null,n.string.supplant(u,{CRID:g,LIMIT:e,OFFSET:t}))}function v(t,i){var r;null==t&&(t={Titles:{resultCount:e.TitleCount,Title:[]}}),null==i&&(i={Categories:{resultCount:e.ChildCategoryCount,Category:[]}});try{r={Children:{resultCount:t.Titles.resultCount+i.Categories.resultCount,returnedCount:t.Titles.Title.length+i.Categories.Category.length,Title:t.Titles.Title,Category:i.Categories.Category}}}catch(e){return void n.error.logCreateCall(o,"Adrenaline return data malformed",void 0,h)}d(r)}if(t)d(n.util.clone(r[t].getChildren));else if(null==e)n.error.logCreateCall(a,"Mandatory parameter 'category' not supplied.",void 0,h);else if(null==i)n.error.logCreateCall(a,"Mandatory parameter 'limit' not supplied.",void 0,h);else{var g=e.id;(c=null==c?0:c)>=e.TitleCount?0===e.ChildCategoryCount?v(null,null):f(i,c-e.TitleCount,(function(e){v(null,e)})):function(e,t,i){n.jsonLoader.loadJson(s,(function(e){try{e.Titles.Title.sort((function(e,t){return e.SortName>t.SortName?1:e.SortName<t.SortName?-1:p?e.Contents.Content[0].IsHD-t.Contents.Content[0].IsHD:t.Contents.Content[0].IsHD-e.Contents.Content[0].IsHD}))}catch(e){n.error.trackError(new n.VmError(n.errorId,"Adrenaline return data malformed","4/"+o,"hidden"))}i(e)}),h,null,null,n.string.supplant(l,{CRID:g,LIMIT:e,OFFSET:t}))}(i,c,(function(t){var r,a;try{r=t.Titles.Title.length,a=e.ChildCategoryCount}catch(e){return void n.error.logCreateCall(o,"Adrenaline return data malformed",void 0,h)}0===a||r===i?v(t,null):f(i-r,0,(function(e){v(t,e)}))}))}}function f(e,i,c){t?i(n.util.clone(r[t].getTitle)):null==e?n.error.logCreateCall(a,"Mandatory parameter 'crid' not supplied.",void 0,c):n.jsonLoader.loadJson(s,(function(e){var t;try{t=e.Titles.Title[0]}catch(e){return void n.error.logCreateCall(o,"Adrenaline return data malformed",void 0,c)}i(t)}),c,null,null,n.string.supplant(d,{CRID:e}))}function v(e,t,i){null==e?n.error.logCreateCall(a,"Mandatory parameter 'crid' not supplied.",void 0,t):f(e,(function(r){null==r?n.error.logCreateCall(204,"No title with CRID:"+e,void 0,t):g(r,t,i)}),t)}function g(e,t,i){if(null==e)n.error.logCreateCall(a,"Mandatory parameter 'title' not supplied.",void 0,t);else{var r;try{r=e.Contents.Content[0]}catch(e){return void n.error.logCreateCall(o,"Adrenaline data passed in malformed",void 0,t)}if(r.Products){var s;try{s=r.Products.Product[0]}catch(e){return void n.error.logCreateCall(o,"Adrenaline data passed in malformed",void 0,t)}var c="x-tivo:flash:tivo_hdui?screenName=vod&partnerOfferId=c="+r.id+"#p="+s.id;n.tivoClient.getAction().uiNavigate(c,"{}",i)}else v(e.id,t,i)}}function m(e,t,i){null==e?n.error.logCreateCall(a,"Mandatory parameter 'path' not supplied.",void 0,t):n.tivoClient.getAction().uiNavigate("x-tivo:flash:tivo_hdui?screenName=vod&entryPoint="+e,"{}",i)}n.lib.configComponentsCb.traxis=function(e){e.traxisUrl&&(s=e.traxisUrl+"/traxis/web?Output=json"),e.spoofType&&(t=e.spoofType),e.categoryRequestXML&&(c=n.string.supplant(e.categoryRequestXML,{CPEID:i})),e.childTitlesXML&&(l=n.string.supplant(e.childTitlesXML,{CPEID:i})),e.childCategoriesXML&&(u=n.string.supplant(e.childCategoriesXML,{CPEID:i})),e.getDetailOfTitleXML&&(d=n.string.supplant(e.getDetailOfTitleXML,{CPEID:i})),void 0!==e.sdBeforeHd&&(p=n.lib.correctToBooleanType(e.sdBeforeHd)),n.lib.configComponentsCb.traxisEx&&n.lib.configComponentsCb.traxisEx(e)},n.traxis={TX_MISSING_PARAM:a,TX_DATA_MALFORMED:o,TX_ADRENALINE_ERROR:203,TX_NO_TITLE:204,getCategoryByCrid:function(e,i,a,l,u){t?i(n.util.clone(r[t].getCategory)):n.jsonLoader.loadJson(s,(function(e){var t;try{t=e.Categories.Category[0]}catch(e){return void n.error.logCreateCall(o,"Adrenaline return data malformed",void 0,a)}!u&&null==l||null==t?i(t):(u&&(l=t.ChildCategoryCount+t.TitleCount),h(t,l,0,(function(e){t.Children=e,i(t)}),a))}),a,null,null,n.string.supplant(c,{CRID:e}))},getChildrenByCategory:h,getTitleDetailByCrid:f,getTitleDetailByTitle:function(e,t,i){null==e?n.error.logCreateCall(a,"Mandatory parameter 'title' not supplied.",void 0,i):f(e.id,t,i)},playTitleByCrid:v,playTitleByTitle:g,playTitleByCridOrLinkToCategoryByPath:function(e,t,i,r){null==e?n.error.logCreateCall(a,"Mandatory parameter 'titleCrid' not supplied.",void 0,i):null==t?n.error.logCreateCall(a,"Mandatory parameter 'categoryPath' not supplied.",void 0,i):f(e,(function(e){null==e?m(t,i,r):g(e,i)}),(function(){m(t,i,r)}))},linkToCategoryByPath:m,VERSION:"1.2.0"}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{};t.Popup=function(){var n,i,r,a=!1;function o(){n&&n.classList.add("vdl_hide"),a=!1}function s(t){if(r){var n=e.getComputedStyle(r).backgroundColor;r.style.backgroundColor=n.substring(0,n.lastIndexOf(",")+1)+t+")"}return this}this.init=function(e){return n||((n=document.createElement("div")).className="vdl_PopupContainer",(i=document.createElement("div")).className="vdl_PopupAlignmentContainer",(r=document.createElement("div")).className="vdl_PopupContent",i.appendChild(r),e.id&&(n.id=e.id),n.appendChild(i),t.viewElement.appendChild(n),null!=e.alpha&&s(e.alpha),null!=e.height&&(r.style.height=String(e.height)+"px"),null!=e.width&&(r.style.width=String(e.width)+"px"),null!=e.top&&(r.style.top=String(e.top)+"px"),null!=e.left&&(r.style.left=String(e.left)+"px"),o()),this},this.show=function(){n&&n.classList.remove("vdl_hide"),a=!0},this.hide=o,this.getVisible=function(){return a},this.getPopupHtmlElement=function(){return r},this.centre=function(){return r&&(r.style.top=String(-.5*Number(r.offsetHeight))+"px",r.style.left=String(-.5*Number(r.offsetWidth))+"px"),this},this.setAlpha=s,this.deletePopup=function(){n&&(t.viewElement.removeChild(n),a=!1,n=null,i=null,r=null)}}}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{};function n(){var e;t.Popup.call(this),e=this.init,this.init=function(t){var n=this.getPopupHtmlElement();if(!n){if(e.call(this,t),(n=this.getPopupHtmlElement()).classList.add("vdl_BasicPopupContent"),t.title){var i=document.createElement("div");i.className="vdl_PopupTitle",i.appendChild(document.createTextNode(t.title)),n.appendChild(i)}var r=t.body;if(r){var a=document.createElement("div");a.className="vdl_PopupBody",a.innerHTML=r,n.appendChild(a)}}return this},this.setTitle=function(e){var t=this.getPopupHtmlElement();return t&&(t.getElementsByClassName("vdl_PopupTitle")[0].textContent=e),this},this.setBody=function(e){var t=this.getPopupHtmlElement();return t&&(t.getElementsByClassName("vdl_PopupBody")[0].innerHTML=e),this}}n.prototype=Object.create(t.Popup.prototype),n.prototype.constructor=n,t.BasicPopup=n}(this),function(e){"use strict";var t,n,i,r,a=e.vmDtvLib=e.vmDtvLib||{},o=a.disableSound;function s(){var e,s,c,l,u=[],d=-1,p=-1,h="init",f=!1;function v(e){var t=document.createElement("div");t.className="vdl_PopupButton",t.setAttribute("buttonId",e.id);var n=document.createElement("span");n.innerHTML=e.text,n.className="vdl_PopupButtonText",t.appendChild(n);var i=document.createElement("div");i.className="vdl_PopupButtonLeftHint",t.appendChild(i);var r=document.createElement("div");r.className="vdl_PopupButtonRightHint",t.appendChild(r);var a=document.createElement("div");return a.className="vdl_PopupButtonCheck",t.appendChild(a),t}function g(e){return e>=0&&e<u.length?(u[e].classList.contains("focused")||(m("UP_DOWN"),u[d]&&u[d].classList.remove("focused"),l&&(clearTimeout(l),l=void 0),l=setTimeout((function(){u[e].classList.add("focused"),l=void 0}),0),d=e),!0):(m("BONK"),!1)}function m(t){e.getVisible()&&a.sound(t)}function C(){return g(d+1)}function b(){return g(d-1)}function T(){if(d>=0){var e=u[d],t=e.getElementsByClassName("vdl_PopupButtonCheck")[0];e.getElementsByClassName("vdl_PopupButtonLeftHint")[0],t.style.opacity=1,setTimeout((function(){t.style.opacity=0;var n=e.getAttribute("buttonId"),i=new CustomEvent(n,{detail:{},bubbles:!0,cancelable:!0});e.dispatchEvent(i),c&&c(n)}),1e3)}}function E(){return h="use",this}a.scale,t=45*a.scale,n=66*a.scale,i=19.5*a.scale,r=6*a.scale,a.BasicPopup.call(this),s=this.init,e=this,this.init=function(e){var a=this.getPopupHtmlElement();if(!a){if(s.call(this,e),(a=this.getPopupHtmlElement()).classList.add("vdl_OptionPopupContent"),o(!0),f=e.disableExit,e.buttons&&e.buttons.length>0){var c,l=e.buttons.length,d=document.createElement("div");d.className="vdl_PopupButtonsList";for(var m=0;m<l;m++)(c=v(e.buttons[m])).style.top=m*n-i+"px",u.push(c),d.appendChild(c),e.idInitialFocus&&e.buttons[m].id===e.idInitialFocus&&(p=m,g(m));if(e.idInitialFocus||(p=0,g(0)),a.appendChild(d),d.style.height=n*l+"px",e.height){d.style.position="absolute",d.style.bottom=r+"px";var C=a.getElementsByClassName("vdl_PopupBody")[0];C.style.height=d.offsetTop-C.offsetTop-t+"px",C.style.overflow="hidden"}}e.disableSound&&!1!==e.disableSound||o(!1),h="use"}return this},this.incrementFocus=C,this.decrementFocus=b,this.addCallback=function(e){return c=e,this},this.getFocus=function(){return d},this.setFocusTo=g,this.onFocusedButtonSelected=T,this.onKey=function(t){var n=t.keyCode;if(e.getVisible())if("use"==h){var i=a.keyCodes;switch(n){case i.LEFT:case i.BACK:if(!f&&d>=0){m("UP_DOWN");var r=new CustomEvent("CANCEL",{detail:{},bubbles:!0,cancelable:!0});u[d].dispatchEvent(r),c&&c("CANCEL"),h="exit"}break;case i.UP:b();break;case i.DOWN:C();break;case i.SKIPFORWARD:u.length<1?m("BONK"):d==u.length-1?g(0):g(u.length-1);break;case i.CHANNELUP:g(0);break;case i.CHANNELDOWN:g(u.length-1);break;case i.RIGHT:case i.OK:n===i.OK?m("SELECT"):m("UP_DOWN"),h="exit",T();break;default:m("BONK")}}else m("BONK")},this.addListener=function(e,t){var n=this.getPopupHtmlElement();return n&&n.addEventListener(e,t),this},this.reset=function(){return h="init",p>=0&&g(p),E(),this},this.resume=E}s.prototype=Object.create(a.BasicPopup.prototype),s.prototype.constructor=s,s.VERSION="1.2.0",a.OptionPopup=s}(this),function(e){"use strict";var t=e.vmDtvLib=e.vmDtvLib||{},n=i.prototype;function i(){this.keysEntered=[],this.currentIndex=0,this.entryFields=[],this.validatingPin=!1,this.soundsEnabled=!0,this.resultCallBackFunc=null,this.pinEntryPopup=null,this.pinOptionPopup=null,this.failedAttempts=0,this.onKey=function(e){var n=e.keyCode,i=t.keyCodes;if(this.pinOptionPopup&&this.pinOptionPopup.getVisible())this.pinOptionPopup.onKey(e);else if(!this.validatingPin)switch(n){case i.LEFT:this.playSound("UP_DOWN"),this.currentIndex>0?this.setCurrentActiveEntry(--this.currentIndex):this.cancelPin();break;case i.BACK:this.setCurrentActiveEntry(0),this.playSound("UP_DOWN"),this.cancelPin();break;case i.NUM0:case i.NUM1:case i.NUM2:case i.NUM3:case i.NUM4:case i.NUM5:case i.NUM6:case i.NUM7:case i.NUM8:case i.NUM9:this.addToKeys(n-i.NUM0),this.playSound("UP_DOWN");break;default:this.playSound("BONK")}}.bind(this),this.opaque=!1,this.lastPage="",this.PIN_WIDTH*=t.scale,this.PIN_HEIGHT*=t.scale}function r(e,i){i.PIN_TITLE_ENTER=e.titleEnter||n.PIN_TITLE_ENTER,i.PIN_TITLE_INCORRECT=e.titleIncorrect||n.PIN_TITLE_INCORRECT,i.INSTRUCTION_ENTER=e.instructionEnter||n.INSTRUCTION_ENTER,i.INSTRUCTION_INCORRECT=e.instructionIncorrect||n.INSTRUCTION_INCORRECT,i.INSTRUCTION_INCORRECT_OPTIONS=e.instructionIncorrectOptions||n.INSTRUCTION_INCORRECT_OPTIONS,i.BUTTON_CAPTION_RESET=e.buttonCaptionReset||n.BUTTON_CAPTION_RESET,i.BUTTON_CAPTION_AGAIN=e.buttonCaptionAgain||n.BUTTON_CAPTION_AGAIN,i.NO_HELP_LINK=t.lib.correctToBooleanType(e.noHelpLink,n.NO_HELP_LINK),i.LEFT_POS=Number(e.leftPos||n.LEFT_POS),i.TOP_POS=Number(e.topPos||n.TOP_POS)}n.PIN_VERSION="1.8.0",n.TRACK_NAME="pin_prompt",n.TRACK_PAGE_ENTRY="pin-entry",n.TRACK_PAGE_INCORRECT="pin-incorrect",n.TRACK_PAGE_OPTIONS="pin-options",n.TRACK_RESULT_SUCCESS="pin-success",n.TRACK_RESULT_FAIL="pin-fail",n.NO_HELP_LINK=!1,n.HELP_LINK_URL="x-tivo:web:sandbox_app:https://content.dtv.virginmedia.com/htmlApps/pinResetLink/index.html",n.PIN_TITLE_ENTER="Enter PIN",n.PIN_TITLE_INCORRECT="Incorrect PIN",n.INSTRUCTION_ENTER="To continue, enter your PIN.",n.INSTRUCTION_INCORRECT="You have entered an incorrect PIN. Please try again or press LEFT to go back.",n.INSTRUCTION_INCORRECT_OPTIONS='You have entered an incorrect PIN. If you\'ve forgotten your PIN, select "Reset the PIN" or press LEFT to go back.',n.BUTTON_CAPTION_RESET="Reset the PIN",n.BUTTON_CAPTION_AGAIN="Try again",n.MAX_ATTEMPTS=5,n.PIN_LENGTH=4,n.PIN_WIDTH=1005,n.PIN_HEIGHT=645,n.LEFT_POS=null,n.TOP_POS=null,n.playSound=t.sound,n.disableSound=t.disableSound,t.PinPrompt=i,t.lib.configComponentsCb.pin=function(e){n.HELP_LINK_URL=e.helpLinkUrl||n.HELP_LINK_URL,n.MAX_ATTEMPTS=Number(e.maxAttempts||n.MAX_ATTEMPTS),r(e,n)},n.setOpaque=function(e){return this.opaque=e,this},n.disableSounds=function(e){return this.soundsEnabled=!e,e&&!0===e&&this.disableSound(!0),this},n.setPosition=function(e,t){return this.LEFT_POS=e,this.TOP_POS=t,this},n.init=function(e,n){if(e)return this.resultCallBackFunc=e,n&&r(n,this),t.tracking&&t.tracking.showPopup(this.TRACK_PAGE_ENTRY),this.showPinEntryPopup(),this},n.showPinEntryPopup=function(){if(this.pinEntryPopup)this.pinEntryPopup.show(),this.trackPageTryAgainOption();else{var e=vm_h2jTemplates.lib_uiComponents_pinPrompt_pinPrompt;this.pinEntryPopup=new t.BasicPopup;var n={width:this.PIN_WIDTH,height:this.PIN_HEIGHT,left:this.LEFT_POS,top:this.TOP_POS,alpha:this.opaque?1:null,title:this.PIN_TITLE_ENTER,body:e};this.pinEntryPopup.init(n),this.LEFT_POS||this.TOP_POS||this.pinEntryPopup.centre(),this.setDescription(this.INSTRUCTION_ENTER),this.pinEntryPopup.show();var i=this.pinEntryPopup.getPopupHtmlElement().getElementsByClassName("vdl_PinPromptFieldsContainer")[0];this.entryFields=i.childNodes,this.setCurrentActiveEntry(0),this.trackPage(this.TRACK_PAGE_ENTRY)}},n.showPinOptionPopup=function(){if(this.pinOptionPopup)this.pinOptionPopup.reset(),this.pinOptionPopup.show();else{this.pinOptionPopup=new t.OptionPopup;var e={width:this.PIN_WIDTH,height:this.PIN_HEIGHT,left:this.LEFT_POS,top:this.TOP_POS,alpha:this.opaque?1:null,title:this.PIN_TITLE_INCORRECT,body:this.INSTRUCTION_INCORRECT_OPTIONS,disableSound:!this.soundsEnabled,idInitialFocus:"TRY_AGAIN"};this.NO_HELP_LINK?e.buttons=[{text:this.BUTTON_CAPTION_AGAIN,id:"TRY_AGAIN"}]:e.buttons=[{text:this.BUTTON_CAPTION_RESET,id:"RESET"},{text:this.BUTTON_CAPTION_AGAIN,id:"TRY_AGAIN"}],this.pinOptionPopup.init(e),this.LEFT_POS||this.TOP_POS||this.pinOptionPopup.centre(),this.NO_HELP_LINK||this.pinOptionPopup.addListener("RESET",this.goToResetPin.bind(this)),this.pinOptionPopup.addListener("TRY_AGAIN",this.tryPinAgain.bind(this)).addListener("CANCEL",this.cancelPin.bind(this)).show()}this.trackPage(this.TRACK_PAGE_OPTIONS)},n.goToResetPin=function(){var e=this;this.trackResetOption(),t.nav.exitToApp({appUrl:this.HELP_LINK_URL},(function(n){t.error.trackError(new t.VmError(t.errorId,n.message,3+n.printable,"hidden")),e.pinOptionPopup.reset(),e.pinOptionPopup.setFocusTo(0)}))},n.tryPinAgain=function(){this.pinOptionPopup.hide(),this.setMainHeader(this.PIN_TITLE_ENTER),this.setDescription(this.INSTRUCTION_ENTER),this.retry(),this.failedAttempts=0,this.showPinEntryPopup()},n.cancelPin=function(){this.resultCallBackFunc(!1),this.closePinPopups("close")},n.setCurrentActiveEntry=function(e){var t;for(this.currentIndex=e,this.currentIndex<this.keysEntered.length&&this.trimStoredEntries(),t=0;t<this.currentIndex;t++)this.toggleState(this.entryFields[t],"populated",t<this.currentIndex);for(this.entryFields[this.currentIndex]&&this.toggleState(this.entryFields[this.currentIndex],"active",!0),t=this.currentIndex+1;t<this.PIN_LENGTH;t++)this.toggleState(this.entryFields[t],"active",!1)},n.toggleState=function(e,t,n){var i=e.getElementsByClassName("vdl_PinPromptEntryHighlight")[0],r=e.getElementsByClassName("vdl_PinPromptEntryAsterisk")[0];switch(t){case"populated":n?(this.removeClass(r,"vdl_hide"),this.addClass(i,"vdl_hide")):this.addClass(r,"vdl_hide");break;case"active":n?(this.addClass(r,"vdl_hide"),this.removeClass(i,"vdl_hide")):(this.addClass(r,"vdl_hide"),this.addClass(i,"vdl_hide"))}},n.addClass=function(e,t){e.classList.add(t)},n.removeClass=function(e,t){e.classList.remove(t)},n.addToKeys=function(e){this.keysEntered.length<this.PIN_LENGTH&&(this.keysEntered.push(e),this.setCurrentActiveEntry(this.keysEntered.length),this.validatePin())},n.trimStoredEntries=function(){this.keysEntered=this.keysEntered.splice(0,this.currentIndex)},n.validatePin=function(){this.keysEntered.length===this.PIN_LENGTH&&(this.validatingPin=!0,setTimeout(this.doPinValidation.bind(this),100))},n.doPinValidation=function(){var e=this,n=this.keysEntered.join("");t.device.validatePin(n,(function(t){t?(e.validatingPin=!1,e.trackPinResult(!0),e.resultCallBackFunc(!0),e.closePinPopups(e.TRACK_RESULT_SUCCESS)):(e.incorrectEntry(),e.trackPinResult(!1))}),null,(function(n){t.errorUi.showErrorPopup(e.appId+"2",n.message,n.printable,(function(){e.pinEntryPopup.hide(),e.cancelPin()}))}))},n.incorrectEntry=function(){this.failedAttempts++,this.failedAttempts<this.MAX_ATTEMPTS?(this.setMainHeader(this.PIN_TITLE_INCORRECT),this.setDescription(this.INSTRUCTION_INCORRECT),this.retry(),this.trackPage(this.TRACK_PAGE_INCORRECT)):(this.pinEntryPopup.hide(),this.showPinOptionPopup())},n.retry=function(){this.setCurrentActiveEntry(0),this.validatingPin=!1},n.setMainHeader=function(e){this.pinEntryPopup.setTitle(e)},n.setDescription=function(e){var t=this.pinEntryPopup.getPopupHtmlElement();t&&(t.getElementsByClassName("vdl_PinPromptDescription")[0].innerHTML=e)},n.trackPage=function(e){this.lastPage!==e&&(t.tracking&&t.tracking.pageLoad(this.TRACK_NAME+"."+e),this.lastPage=e)},n.trackPageTryAgainOption=function(){this.trackPage(this.TRACK_PAGE_ENTRY)},n.trackResetOption=function(){t.tracking&&t.tracking.exitApp("reset pin")},n.trackPinResult=function(e){var n=e?this.TRACK_RESULT_SUCCESS:this.TRACK_RESULT_FAIL+"-"+this.failedAttempts;t.tracking&&t.tracking.trackEvent("loginAttempt",{eventSuccess:n})},n.closePinPopups=function(e){this.pinEntryPopup.deletePopup(),this.pinEntryPopup=null,this.pinOptionPopup&&(this.pinOptionPopup.deletePopup(),this.pinOptionPopup=null),t.tracking&&t.tracking.closePopup(this.TRACK_PAGE_ENTRY,e)}}(this),function(){"use strict";var e,t=window.vmDtvLib=window.vmDtvLib||{};e=t.customer={PACKAGE_ENTITLEMENT_FAILED:1,isPackageEntitled:function(n,i){t.chanMan.useChanList((function(r){if(r)i(!1,r);else{var a=t.chanMan.channelList.getChannelByNetworkServiceId(n);a&&a.hasOwnProperty("received")?i(t.lib.correctToBooleanType(a.received)):i(!1,new t.VmError(e.PACKAGE_ENTITLEMENT_FAILED,"channel not found, returned null"))}}))}}}(),vmDtvLib.VERSION="1-8-0",function(){"use strict";(window.vm_h2jTemplates=window.vm_h2jTemplates||{}).lib_uiComponents_pinPrompt_pinPrompt="<div class=\"vdl_PinPromptContainer\"><div class=\"vdl_PinPromptDescription\"></div><div class=\"vdl_PinPromptFieldsContainer\"><div class='vdl_PinPromptField'><div class='vdl_PinPromptEntryHighlight'></div><div class='vdl_PinPromptEntryField'></div><div class='vdl_PinPromptEntryAsterisk'></div></div><div class='vdl_PinPromptField'><div class='vdl_PinPromptEntryHighlight'></div><div class='vdl_PinPromptEntryField'></div><div class='vdl_PinPromptEntryAsterisk'></div></div><div class='vdl_PinPromptField'><div class='vdl_PinPromptEntryHighlight'></div><div class='vdl_PinPromptEntryField'></div><div class='vdl_PinPromptEntryAsterisk'></div></div><div class='vdl_PinPromptField'><div class='vdl_PinPromptEntryHighlight'></div><div class='vdl_PinPromptEntryField'></div><div class='vdl_PinPromptEntryAsterisk'></div></div></div></div>"}();